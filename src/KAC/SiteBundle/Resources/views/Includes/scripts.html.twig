{% javascripts
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.tmpl.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.ui.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.hoverintent.js'
    '@KACSiteBundle/Resources/public/plugins/underscore/underscore.js'
    '@KACSiteBundle/Resources/public/plugins/uniform/uniform.js'
    '@KACSiteBundle/Resources/public/plugins/select2/json2.js'
    '@KACSiteBundle/Resources/public/plugins/select2/select2.js'
    '@KACSiteBundle/Resources/public/plugins/jstree/jquery.jstree.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.etalage.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.lightbox.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.nivo.slider.js'
    '@KACSiteBundle/Resources/public/plugins/jquery/jquery.menu-aim.js'
    '@KACSiteBundle/Resources/public/plugins/upload/js/jquery.iframe-transport.js'
    '@KACSiteBundle/Resources/public/plugins/upload/js/jquery.fileupload.js'
    '@KACSiteBundle/Resources/public/plugins/upload/js/jquery.fileupload-ui.js'
    '@KACSiteBundle/Resources/public/plugins/upload/js/jquery.fileupload-jui.js'
    '@KACSiteBundle/Resources/public/plugins/treetable/javascripts/src/jquery.treetable.js'
    '@KACSiteBundle/Resources/public/js/ui/ui.js'
    '@KACSiteBundle/Resources/public/js/forms/forms.js'
    '@KACSiteBundle/Resources/public/js/buttons/buttons.js'
    '@KACSiteBundle/Resources/public/js/images/images.js'
    '@KACSiteBundle/Resources/public/js/search/search.js'
    '@KACSiteBundle/Resources/public/js/navigation/navigation.js'
    '@KACSiteBundle/Resources/public/js/loading/loading.js'
    '@KACSiteBundle/Resources/public/js/products/products.js'
    output='js/core-compressed.js'
    filter='?yui_js'
%}
    <script src="{{ asset_url }}" type="text/javascript"></script>
{% endjavascripts %}

<script type="text/javascript">
    $(document).ready(function() {
        var $menuRow = $(".main-menu .menu-horizontal");
        var activeRow = null;
        $menuRow.find('> li').on('mouseenter', function() {
            var submenuId = $(this).data("submenu"),
                $submenu = $("#" + submenuId),
                height = $menuRow.outerHeight();

            $submenu.css({
                display: "block",
                left: $(this).position().left,
                top: height
            });
        }).on('mouseleave', function() {
            var submenuId = $(this).data("submenu"),
                $submenu = $("#" + submenuId);

                $submenu.css("display", "none");
                $submenu.find('menu-horizontal').css("display", "none");
        });

        var $menu = $(".main-menu .menu-vertical");
        $menu.menuAim({
            activate: activateSubmenu,
            deactivate: deactivateSubmenu
        });

        function activateSubmenu(row) {
            var $row = $(row),
                    submenuId = $row.data("submenu"),
                    $submenu = $("#" + submenuId),
                    height = $menu.outerHeight(),
                    width = $menu.outerWidth();

            // Show the submenu
            $submenu.css({
                display: "block",
                left: width - 4,
                top: -1,
                height: height - 22
            });
        }

        function deactivateSubmenu(row) {
            var $row = $(row),
                    submenuId = $row.data("submenu"),
                    $submenu = $("#" + submenuId);

            // Hide the submenu and remove the row's highlighted look
            $submenu.css("display", "none");
        }
    });
</script>