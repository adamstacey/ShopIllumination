{% extends '::shop.html.twig' %}
{% block title %}My Account | {{ parent() }}{% endblock %}
{% block body %}
	<header>
		<h1>My Account</h1>
	</header>
	<section class="container_6 clearfix">
		<div class="grid_6">
            <div class="portlet">
                <header>
                    <h2>My Account</h2>
                </header>
                <section>
                    <div class="sidebar-tabs">
                        <ul>
                            <li id="tab-my-details"><a href="#my-details">My Details</a></li>
                            <li id="tab-my-addresses"><a href="#my-addresses">My Addresses</a></li>
                            <li id="tab-my-orders"><a href="#my-orders">My Orders</a></li>
                        </ul>
                        <section id="my-details" class="form ui-helper-hidden">
						    <h5>My Details</h5>
						    <div class="clearfix">
						        <label for="form-first-name" class="form-label"><em>*</em> First Name<small>Enter your first name</small></label>
							    <div class="form-input no-margin-bottom"><input data-message="Enter your first name" type="text" id="form-first-name" name="first-name" required="required" value="{% if customer.contact.firstName is defined %}{{ customer.contact.firstName }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-last-name" class="form-label"><em>*</em> Last Name<small>Enter your last name</small></label>
						        <div class="form-input"><input data-message="Enter your last name" type="text" id="form-last-name" name="last-name" required="required" value="{% if customer.contact.lastName is defined %}{{ customer.contact.lastName }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-organisation-name" class="form-label">Company<small>Enter your company name</small></label>
						        <div class="form-input"><input type="text" id="form-organisation-name" name="organisation-name" value="{% if customer.contact.organisationName is defined %}{{ customer.contact.organisationName }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-telephone-daytime" class="form-label"><em>*</em> Telephone (Daytime)<small>Enter a valid telephone number</small></label>
						        <div class="form-input no-margin-bottom"><input data-validation-type="telephone" class="telephone" data-message="Enter a valid telephone number" type="text" id="form-telephone-daytime" name="telephone-daytime" required="required" value="{% if customer.contact.contactNumbers.0.number is defined %}{{ customer.contact.contactNumbers.0.number }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-telephone-evening" class="form-label">Telephone (Evening)<small>Enter a valid telephone number</small></label>
						        <div class="form-input no-margin-bottom"><input data-validation-type="telephone" data-message="Enter a valid telephone number" class="telephone" type="text" id="form-telephone-evening" name="telephone-evening" value="{% if customer.contact.contactNumbers.1.number is defined %}{{ customer.contact.contactNumbers.1.number }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-mobile" class="form-label">Mobile<small>Enter a valid mobile number</small></label>
						        <div class="form-input no-margin-bottom"><input data-validation-type="mobile" class="telephone" data-message="Enter a valid mobile number" type="text" id="form-mobile" name="mobile" value="{% if customer.contact.contactNumbers.2.number is defined %}{{ customer.contact.contactNumbers.2.number }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <div class="form-input">
						        	<div class="info-message ui-status-highlight">
										<span class="info-message-icon ui-icon ui-icon-info"></span>
										<p>Although we do not require your mobile number, we would be able to keep you up-to-date with your order progress by text message if you did supply your mobile number.</p>
										<div class="clear"></div>
									</div>
						        </div>
						    </div>
							<div class="clearfix">
						        <label for="form-email-address" class="form-label"><em>*</em> Email Address<small>Enter a valid email address</small></label>
						        <div class="form-input"><input class="email-address" data-message="Enter a valid email address" type="email" id="form-email-address" name="email-address" required="required" value="{% if customer.contact.contactEmailAddresses.0 is defined %}{{ customer.contact.contactEmailAddresses.0.email }}{% endif %}" /></div>
						    </div>
							<div class="clearfix">
						        <label for="form-password" class="form-label">Password<small>Enter a password</small></label>
						        <div class="form-input no-margin-bottom"><input data-message="Enter your password" type="password" id="form-password" name="password" value="" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-confirm-password" class="form-label">Confirm Password<small>Confirm your password</small></label>
						        <div class="form-input"><input data-message="Confirm your password" data-equals="password" type="password" id="form-confirm-password" name="confirm-password" value="" /></div>
						    </div>
						    <div class="clearfix">
						        <div class="form-input buttons no-margin-bottom">
						    		<button class="button action-save-my-details ui-button-orange" data-icon-primary="ui-icon-check">Save My Details</button>
						        </div>
						    </div>
						</section>
						<section id="my-addresses" class="form ui-helper-hidden">
							<h5>Billing Address</h5>
							<div class="clearfix">
						        <label for="form-billing-first-name" class="form-label"><em>*</em> First Name<small>Enter your first name</small></label>
							    <div class="form-input no-margin-bottom"><input data-message="Enter your first name" type="text" id="form-billing-first-name" name="billing-first-name" required="required" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.firstName }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-last-name" class="form-label"><em>*</em> Last Name<small>Enter your last name</small></label>
						        <div class="form-input"><input data-message="Enter your last name" type="text" id="form-billing-last-name" name="billing-last-name" required="required" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.lastName }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-organisation-name" class="form-label">Company<small>Enter the company name</small></label>
						        <div class="form-input"><input type="text" id="form-billing-organisation-name" name="billing-organisation-name" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.organisationName }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <div class="form-input no-margin-bottom">
						        	<div class="info-message ui-status-highlight">
										<span class="info-message-icon ui-icon ui-icon-info"></span>
										<p class="small-message">The billing address must match the address on the statement of the card you want to pay with. You can still enter a different delivery address for the delivery of any orders.</p>
										<div class="clear"></div>
									</div>
						        </div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-country-code" class="form-label"><em>*</em> Country</label>
						        <div class="form-input no-margin-bottom">
						        	<select id="form-billing-country-code" name="billing-country-code">
						        		<option value="GB"{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode == 'GB' %} selected="selected"{% endif %}{% endif %}>United Kingdom</option>
						        		<option value="IE"{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode == 'IE' %} selected="selected"{% endif %}{% endif %}>Republic of Ireland</option>
						        	</select>
						        </div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-address-line-1" class="form-label"><em>*</em> Address Line 1</label>
						        <div class="form-input no-margin-bottom"><input data-message="Enter the first line of your address" type="text" id="form-billing-address-line-1" name="billing-address-line-1" required="required" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.addressLine1 }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-address-line-2" class="form-label">Address Line 2</label>
						        <div class="form-input no-margin-bottom"><input type="text" id="form-billing-address-line-2" name="billing-address-line-2" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.addressLine2 }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-town-city" class="form-label"><em>*</em> Town/City</label>
						        <div class="form-input no-margin-bottom"><input data-message="Enter your Town or City" type="text" id="form-billing-town-city" name="billing-town-city" required="required" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.townCity }}{% endif %}" /></div>
						    </div>
						    <div class="clearfix">
						        <label for="form-billing-county-state" class="form-label">County</label>
						        <div class="form-input no-margin-bottom"><input type="text" id="form-billing-county-state" name="billing-county-state" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.countyState }}{% endif %}" /></div>
						    </div>
						     <div id="billing-post-zip-code-container" class="clearfix{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode != 'GB' %} ui-helper-hidden{% endif %}{% endif %}">
						        <label for="form-billing-post-zip-code" class="form-label"><em>*</em> Post Code</label>
						        <div class="form-input no-margin-bottom"><input class="uppercase" data-validation-type="postcode" data-message="Enter a valid post code" type="text" id="form-billing-post-zip-code" name="billing-post-zip-code" required="required" value="{% if customer.contact.contactAddresses.0 is defined %}{{ customer.contact.contactAddresses.0.postZipCode }}{% endif %}" /></div>
						    </div>
						    <div id="same-address-billing" class="same-addresses clearfix{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode == 'IE' %} ui-helper-hidden{% endif %}{% endif %}">
								<label for="form-same-delivery-address" class="form-label">&nbsp;</label>
								<div class="form-input"><input type="checkbox"{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode == 'IE' %} checked="checked"{% else %}{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.0.postZipCode == customer.contact.contactAddresses.1.postZipCode %} checked="checked"{% endif %}{% endif %}{% endif %}{% endif %} id="form-same-delivery-address" name="same-delivery-address" value="1" />Do you want to deliver to this address?</div>
							</div>
							<div id="republic-of-ireland-billing-address-message" class="clearfix republic-of-ireland-address-message{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode != 'IE' %} ui-helper-hidden{% endif %}{% endif %}">
						        <div class="form-input no-margin-bottom">
						        	<div class="info-message ui-status-highlight">
										<span class="info-message-icon ui-icon ui-icon-info"></span>
										<p class="small-message">Please note that the billing and delivery address need to be the same for all orders from the Republic of Ireland.</p>
										<div class="clear"></div>
									</div>
						        </div>
						    </div>
							<div id="delivery-address"{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.0.countryCode == 'IE' %} class="ui-helper-hidden"{% else %}{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.0.postZipCode == customer.contact.contactAddresses.1.postZipCode %} class="ui-helper-hidden"{% endif %}{% endif %}{% endif %}{% endif %}>
								<h5>Delivery Address</h5>
								<div class="clearfix">
							        <label for="form-delivery-first-name" class="form-label"><em>*</em> First Name<small>Enter your first name</small></label>
								    <div class="form-input no-margin-bottom"><input data-message="Enter your first name" type="text" id="form-delivery-first-name" name="delivery-first-name" required="required" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.firstName }}{% endif %}" /></div>
							    </div>
							    <div class="clearfix">
							        <label for="form-delivery-last-name" class="form-label"><em>*</em> Last Name<small>Enter your last name</small></label>
							        <div class="form-input"><input data-message="Enter your last name" type="text" id="form-delivery-last-name" name="delivery-last-name" required="required" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.lastName }}{% endif %}" /></div>
							    </div>
							    <div class="clearfix">
							        <label for="form-delivery-organisation-name" class="form-label">Company<small>Enter the company name</small></label>
							        <div class="form-input"><input type="text" id="form-delivery-organisation-name" name="delivery-organisation-name" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.organisationName }}{% endif %}" /></div>
							    </div>
							    <div id="same-address-delivery" class="same-addresses clearfix{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.1.countryCode == 'IE' %} ui-helper-hidden{% endif %}{% endif %}">
									<label for="form-use-billing-address" class="form-label">&nbsp;</label>
									<div class="form-input no-margin-bottom"><input type="checkbox"{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.1.countryCode == 'IE' %} checked="checked"{% else %}{% if customer.contact.contactAddresses.0 is defined %}{% if customer.contact.contactAddresses.1.postZipCode == customer.contact.contactAddresses.0.postZipCode %} checked="checked"{% endif %}{% endif %}{% endif %}{% endif %} id="form-use-billing-address" name="use-billing-address" value="1" />Do you want to use your billing address?</div>
								</div>								
								<div class="clearfix">
							        <label for="form-delivery-country-code" class="form-label"><em>*</em> Country</label>
							        <div class="form-input no-margin-bottom">
							        	<select id="form-delivery-country-code" name="delivery-country-code">
							        		<option value="GB"{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.1.countryCode == 'GB' %} selected="selected"{% endif %}{% endif %}>United Kingdom</option>
							        		<option value="IE"{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.1.countryCode == 'IE' %} selected="selected"{% endif %}{% endif %}>Republic of Ireland</option>
							        	</select>
							        </div>
							    </div>
							    <div class="clearfix">
							        <label for="form-delivery-address-line-1" class="form-label"><em>*</em> Address Line 1</label>
							        <div class="form-input no-margin-bottom"><input data-message="Enter the first line of your address" type="text" id="form-delivery-address-line-1" name="delivery-address-line-1" required="required" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.addressLine1 }}{% endif %}" /></div>
							    </div>
							    <div class="clearfix">
							        <label for="form-delivery-address-line-2" class="form-label">Address Line 2</label>
							        <div class="form-input no-margin-bottom"><input type="text" id="form-delivery-address-line-2" name="delivery-address-line-2" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.addressLine2 }}{% endif %}" /></div>
							    </div>
							    <div class="clearfix">
							        <label for="form-delivery-town-city" class="form-label"><em>*</em> Town/City</label>
							        <div class="form-input no-margin-bottom"><input data-message="Enter your Town or City" type="text" id="form-delivery-town-city" name="delivery-town-city" required="required" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.townCity }}{% endif %}" /></div>
							    </div>
							    <div class="clearfix">
							        <label for="form-delivery-county-state" class="form-label">County</label>
							        <div class="form-input no-margin-bottom"><input type="text" id="form-delivery-county-state" name="delivery-county-state" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.countyState|default('') }}{% endif %}" /></div>
							    </div>
							    <div id="delivery-post-zip-code-container" class="clearfix{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.1.countryCode != 'GB' %} ui-helper-hidden{% endif %}{% endif %}">
							        <label for="form-delivery-post-zip-code" class="form-label"><em>*</em> Post Code</label>
							        <div class="form-input"><input class="uppercase" data-validation-type="postcode" data-message="Enter a valid post code" type="text" id="form-delivery-post-zip-code" name="delivery-post-zip-code" required="required" value="{% if customer.contact.contactAddresses.1 is defined %}{{ customer.contact.contactAddresses.1.postZipCode|default('') }}{% endif %}" /></div>
							    </div>
							    <div id="republic-of-ireland-delivery-address-message" class="clearfix republic-of-ireland-address-message{% if customer.contact.contactAddresses.1 is defined %}{% if customer.contact.contactAddresses.1.countryCode != 'IE' %} ui-helper-hidden{% endif %}{% endif %}">
							        <div class="form-input no-margin-bottom">
							        	<div class="info-message ui-status-highlight">
											<span class="info-message-icon ui-icon ui-icon-info"></span>
											<p class="small-message">Please note that the billing and delivery address need to be the same for all orders from the Republic of Ireland.</p>
											<div class="clear"></div>
										</div>
							        </div>
							    </div>
							</div>
						    <div class="clearfix">
						        <div class="form-input buttons no-margin-bottom">
						    		<button class="button action-save-my-addresses ui-button-orange" data-icon-primary="ui-icon-check">Save My Addresses</button>
						        </div>
						    </div>
						</section>
						<section id="my-orders" class="form ui-helper-hidden">
							<h5>My Orders</h5>
							{% if orders|length > 0 %}
								<table class="listing" width="100%" cellpadding="0" cellspacing="0" border="0">
									<tr>
										<th class="al">Order Number</th>
										<th class="ac">Status</th>
										<th class="ac">Quantity</th>
										<th class="ac">Total</th>
										<th class="ac">Date</th>
										<th width="1" class="ac">&nbsp;</th>
									</tr>
									{% for order in orders %}
										<tr>
											<td class="al">{{ order.id }}</td>
											<td class="ac">{{ order.status }}</td>
											<td class="ac">{{ order.items }}</td>
											<td class="ac">&pound;{{ order.total|number_format(2) }}</td>
											<td class="ac">{{ order.createdAt|date("d/m/Y h:ia") }}</td>
											<td width="1" class="ac">
												<a target="_blank" href="/uploads/documents/order/invoice-{{ order.id }}.pdf" data-icon-primary="ui-icon-print" class="button ui-button-green">Print</a>
											</td>
										</tr>
									{% endfor %}
								</table>
							{% else %}
								<p>You have not yet placed any orders.</p>
							{% endif %}
						</section>
                    </div>
                </section>
            </div>
        </div>
	   	<div class="clear"></div>
	</section>
{% endblock %}
{% block javascripts %}
	{{ parent() }}
	{% include 'WebIlluminationShopBundle:Users:userScript.js.twig' %}
{% endblock %}