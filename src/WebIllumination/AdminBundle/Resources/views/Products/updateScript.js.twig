<script type="text/javascript" defer="defer">

	{# Check if data has been loaded #}
	var $imagesLoaded = false;
	var $pricesLoaded = false;
	var $optionsLoaded = false;
	var $filesLoaded = false;
	var $relatedProductsLoaded = false;
	var $cheaperAlternativesLoaded = false;
	var $guaranteesLoaded = false;
	var $redirectsLoaded = false;
	
	{# Setup the product list #}
	var products = [
		{% for product in data.products %}
			{
				value: "{{ product.productId }}",
				label: "{{ product.header }} ({{ product.productCode }})"
			}{% if not loop.last %},{% endif %}
		{% endfor %}
	];
	
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateDescriptionFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateImagesFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updatePricesFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateOptionsFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateFeaturesFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateRelatedProductsFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateCheaperAlternativesFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateFilesFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateGuaranteesFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateRedirectsFunctions.js.twig' with {'settings': settings, 'data': data} %}
	{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateSeoFunctions.js.twig' with {'settings': settings, 'data': data} %}
	
	$(document).ready(function() {
		
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateGeneralScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateDescriptionScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateImagesScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updatePricesScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateOptionsScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateFeaturesScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateRelatedProductsScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateCheaperAlternativesScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateUniqueProductIdentifiersScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateFilesScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updatePackageDimensionsScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateGuaranteesScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateRedirectsScript.js.twig' with {'settings': settings, 'data': data} %}
		{% include 'WebIlluminationAdminBundle:'~settings.multipleItemsModel~':updateSeoScript.js.twig' with {'settings': settings, 'data': data} %}
		
		{# Setup the minimum height of the side bar #}
		$(".sidebar-tabs").each(function() {
			var $minimumSideBarHeight = 3;
			$(this).find("li").each(function() {
				$minimumSideBarHeight = $minimumSideBarHeight + $(this).outerHeight(true);
			});
			$(".sidebar-tabs").css("min-height", $minimumSideBarHeight);
		});
		
		{# Update the tabs status #}
		$(".sidebar-tabs input, .sidebar-tabs select, .sidebar-tabs textarea").live('change', function() {
			updateStatus();
		});
		$(".sidebar-tabs").bind("tabsselect", function(event, ui) {
			updateStatus();
			return true;
		});
		
	});	
</script>