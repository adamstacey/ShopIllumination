{% extends 'WebIlluminationSiteBundle::base.html.twig' %}

{% block title %}Prices | {{ variant.description.pageTitle }}{% endblock %}

{% block body %}
    <div class="widget-group clearfix">
        <div class="widget widget-2-of-7">
            {% include 'WebIlluminationSiteBundle:Variant:editLeftMenu.html.twig' %}
        </div>
        <div class="widget widget-5-of-7">
            <section>
                <form class="form" id="form-edit" method="post" action="{{ path(app.request.attributes.get('_route'), {'productId': variant.product.id, 'variantId': variant.id}) }}" {{ form_enctype(form) }}>
                    <div class="widget-group clearfix">
                        <div class="widget widget-1-of-1">
                            <div class="ui-widget">
                                <header class="ui-widget-header ui-corner-top">
                                    <span class="ui-button-icon-primary ui-icon icon-white icon-276"></span>
                                    <h2>Prices</h2>
                                </header>
                                <section class="ui-widget-content ui-corner-all">
                                    {% if form.errors %}
                                        <div class="message error">
                                            <p>You have <strong>{{ form.errors|length }}</strong> errors. Please fix the following errors before continuing:</p>
                                            {{ form_errors(form) }}
                                        </div>
                                    {% endif %}
                                    <fieldset class="pbm">
                                        <table class="form-table" id="price-list" width="100%" data-prototype="{{ form_widget(form.prices.vars.prototype) | e }}">
                                            <thead>
                                            <tr>
                                                <th>RRP</th>
                                                <th>List Price</th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for row in form.prices %}
                                                <tr>
                                                    {{ form_widget(row) }}
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                        {% do form.prices.setRendered() %}
                                    </fieldset>
                                    {{ form_rest(form) }}

                                    <div class="clearfix">
                                        <button type="submit" class="button button-turquoise icon-white fr" data-icon-secondary="icon-471">Save</button>
                                        <button type="button" data-table-object="price-list" class="actionAddFormRow mrm fr button button-green icon-white" data-icon-secondary="icon-1120">Add Price</button>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>
{% endblock %}
