(function(a){a.fn.ellipsis=function(){return this.each(function(){var f=a(this);if(f.css("overflow")=="hidden"){var h=f.html();var c=f.hasClass("multiline");var d=a(this.cloneNode(true)).hide().css("position","absolute").css("overflow","visible").width(c?f.width():"auto").height(c?"auto":f.height());f.after(d);function b(){return d.height()>f.height()}function e(){return d.width()>f.width()}var g=c?b:e;while(h.length>0&&g()){h=h.substr(0,h.length-1);d.html(h+"...")}f.html(d.html());d.remove()}})}})(jQuery);(function(a){a.fn.placeholder=function(b){return this.each(function(){if(!("placeholder" in document.createElement(this.tagName.toLowerCase()))){var c=a(this),d=c.attr("placeholder");c.val(d).data("color",c.css("color")).css("color","#aaa");c.focus(function(){if(a.trim(c.val())===d){c.val("").css("color",c.data("color"))}}).blur(function(){if(!a.trim(c.val())){c.val(d).data("color",c.css("color")).css("color","#aaa")}})}})}}(jQuery));var menuYloc=null;var adminCookieExpiry=365;var sortableCookie="sortable-order";var sortableName=".sortable";$(document).ready(function(){$("input.number").live("keyup",function(a){$(this).val($(this).val().replace(/[^0-9]/g,""))});$("input.telephone").live("keyup",function(a){$(this).val($(this).val().replace(/[^0-9 ]/g,""))});$("input.email").live("keyup",function(a){$(this).val($(this).val().toLowerCase())});$(".ellipsis").ellipsis();$(".action-scroll-to-bottom").live("click",function(){$("html, body").animate({scrollTop:$("#footer").offset().top},"slow")});if(typeof $("ul.sf-menu").superfish==="function"){$("ul.sf-menu").supersubs({minWidth:15,maxWidth:27,extraWidth:1}).superfish()}if(typeof prettyPrint==="function"){prettyPrint();$(".prettyprint").after('<div class="clear"></div>').hover(function(){if($(this).css("width","auto").width()<$(this).parent().width()){$(this).css("width","100%")}},function(){})}if($(".slider-gallery").length>0){$(".slider-gallery").cycle({speed:1000,fx:"scrollRight",easing:"easeOutExpo",timeout:6000,delay:6000,pause:1,pager:"#slider_gallery_navigation",random:0})}if($(".slider-products").length>0){$(".slider-products").cycle({speed:1000,fx:"scrollLeft",easing:"easeOutExpo",timeout:6000,delay:6000,pause:1,pager:"#slider_products_navigation",random:0})}if($(".display").length>0){$(".display").dataTable({bJQueryUI:true,bRetrieve:true,bDestroy:true,sPaginationType:"full_numbers"})}if($(".basic-display").length>0){$(".basic-display").dataTable({bJQueryUI:true,bSort:false,bPaginate:false,bFilter:false,bInfo:false,bRetrieve:true,bDestroy:true}).fnDraw()}initGlobalFunctions();$(".action-image-popup").live("click",function(){loadImagePopup($(this).attr("data-image-large-path"),$(this).attr("alt"),$(this).attr("data-image-size-width"),$(this).attr("data-image-size-height"))});$(".action-delete-image").live("click",function(){if(confirm("Are you sure you want to delete this image?")){$("#ajax_loading").show();var a=$(this).parent(".image-container");$.ajax({url:"/system/ajaxDeleteImage/"+$(this).attr("rel"),success:function(){a.fadeOut();$("#ajax_loading").hide()},error:function(){alert("Sorry, there was a problem deleting this image. Please try again.");$("#ajax_loading").hide()}})}});$(".action-delete-multi-image").live("click",function(){if(confirm("Are you sure you want to delete this image?")){$("#ajax_loading").show();var a=$(this).attr("rel");$.ajax({url:"/system/ajaxDeleteImage/"+a,success:function(){$("#image-f-"+a).fadeOut(function(){$("#image-f-"+a).remove()});$("#image-i-"+a).fadeOut(function(){$("#image-i-"+a).remove()});$("#ajax_loading").hide()},error:function(){alert("Sorry, there was a problem deleting this image. Please try again.");$("#ajax_loading").hide()}})}});$.fx.speeds._default=1000;$(".action-fix").live("click",function(){$(".sidebar-tabs").tabs("select",$(this).attr("rel"));$("html, body").animate({scrollTop:$("#{{ current_tab }}").offset().top},"slow")});$(".sidebar-tabs .ui-tabs-nav li a").click(function(){if($("#form-current-tab")){$("#form-current-tab").val($(this).attr("href").replace("#",""))}})});function resetGlobalFunctions(){initGlobalFunctions()}function resetMessages(){$("#message-error, #message-notice, #message-success").slideUp()}function initGlobalFunctions(){$(".button").each(function(){$(this).button({icons:{primary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-primary"):null,secondary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-secondary"):null},text:$(this).attr("data-icon-only")==="true"?false:true})});$(":date").datepicker({dateFormat:"dd/mm/yy"});$(".accordion").accordion();$(".tabs").tabs().find("> .ui-tabs-nav").removeClass("ui-corner-all").addClass("ui-corner-top");$(".sidebar-tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix").find("li").removeClass("ui-corner-top").addClass("ui-corner-left").parents(".sidebar-tabs").find(".ui-tabs-nav").removeClass("ui-corner-all").addClass("ui-corner-left").parents(".sidebar-tabs").find(".ui-tabs-panel").removeClass("ui-corner-bottom").addClass("ui-corner-right");var b=[],a=$.cookie&&$.cookie("collapsedPortlets")?$.cookie("collapsedPortlets"):"";b=a.split(",");$(".portlet").each(function(){var d=$(this),e=d.attr("id"),c=$(this).hasClass("collapsible")&&b.includes(e);d.addClass("ui-widget ui-widget-content ui-corner-all"+(c?" collapsed":"")).find("> header:first").addClass("ui-widget-header ui-corner-top").parent().find("> section:last").addClass("ui-widget-content ui-corner-bottom").parent().filter(".collapsible").find("> header:first").append('<a href="#" class="portlet-collapse ui-corner-all" role="button"><span class="'+(c?"ui-icon ui-icon-circle-plus":"ui-icon ui-icon-circle-minus")+'">Expand/Collapse</span></a>').find(".portlet-collapse").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).click(function(){if(d.hasClass("collapsed")){$("span",this).removeClass("ui-icon-circle-plus").addClass("ui-icon-circle-minus");d.removeClass("collapsed").find("> section").css("display","none").slideDown(500,"easeOutExpo");if(b.includes(e)){b.remove(e);saveCollapsed(b)}}else{$("span",this).removeClass("ui-icon-circle-minus").addClass("ui-icon-circle-plus");$(this).parent().next().slideUp(500,"easeOutExpo",function(){d.addClass("collapsed");if(!b.includes(e)){b.push(e);saveCollapsed(b)}})}return false})});$("input[placeholder]").placeholder();$(".buttonset input").addClass("no-uniform");$(".buttonset").addClass("ui-corner-all").buttonset();$(":checkbox:not(.no-uniform), :radio:not(.no-uniform), select:not(.no-uniform), :file:not(.no-uniform)").uniform();$(":range").each(function(){var c=this,e={animate:true,value:$(this).val(),min:$(this).attr("min")?parseInt($(this).attr("min"),10):0,max:$(this).attr("max")?parseInt($(this).attr("max"),10):100,step:$(this).attr("step")?parseInt($(this).attr("step"),10):1,disabled:$(this).is(":disabled"),orientation:$(this).attr("data-orientation")==="vertical"?"vertical":"horizontal",range:$(this).attr("data-range")==="true"?true:($(this).attr("data-range") in {min:1,max:1}?$(this).attr("data-range"):false),values:$(this).attr("data-values")?$(this).attr("data-values").split(/,/):null,slide:function(f,g){$(c).val(g.value);if($(c).attr("data-values")){$(c).attr("data-values",g.values[0]+","+g.values[1])}$(c).change()}},d=$('<div class="slider"></div>').slider(e);$(this).before(d).hide()});$(".progress").each(function(){var c=parseInt($(this).attr("data-value"),10);$(this).progressbar({value:c}).filter("[data-show-value=true]").find("div").append("<b>"+c+"%</b>")});$(".message.closeable").prepend('<span class="message-close ui-icon ui-icon-circle-close"></span>').find(".message-close").click(function(){$(this).parent().slideUp()});$("#message-error, #message-notice, #message-success").live("click",function(){$(this).slideUp()});$("body").append('<div class="apple_overlay black" id="overlay"><iframe class="contentWrap" style="width: 100%; height: 500px"></iframe></div>');$("a.help[rel]").overlay({effect:"apple",onBeforeLoad:function(){var c=this.getOverlay().find(".contentWrap");c.attr("src",this.getTrigger().attr("href"))}});$("input.seo-url").bind("focus keypress keyup blur",function(){$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-]/g,""))});$("input.uppercase").bind("focus keypress keyup blur",function(){$(this).val($(this).val().toUpperCase())});$("input.lowercase").bind("focus keypress keyup blur",function(){$(this).val($(this).val().toLowerCase())});$("input.integer").bind("focus keypress keyup blur",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))});$("input.decimal").bind("focus keypress keyup blur",function(){$(this).val($(this).val().replace(/[^0-9.]/g,""))});$("input.url").bind("focus keypress keyup",function(){$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-.?+=&://]/g,""));if($(this).val().substring(0,7)!="http://"){$(this).val("http://"+$(this).val())}});$("input.url").bind("blur",function(){$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-.?+=&://]/g,""));if($(this).val()=="http://"){$(this).val("")}});$.tools.validator.fn("[type=time]","Please supply a valid time.",function(c,d){return(/^\d\d:\d\d$/).test(d)});$.tools.validator.fn("[data-equals]","The value you entered is not equal with the value entered in the $1 field.",function(c){var d=c.attr("data-equals"),e=this.getInputs().filter("[name="+d+"]");return c.val()===e.val()?true:[d]});$.tools.validator.fn("[minlength]",function(c,e){var d=c.attr("minlength");return e.length>=d?true:{en:"Please provide at least "+d+" character"+(d>1?"s":"")+"."}});$.tools.validator.fn("[data-validation-type=postcode]","Please enter a valid post code.",function(c,d){if(d!=""){return(/^(000|GIR ?0AA|(?:[A-PR-UWYZ](?:\d|\d{2}|[A-HK-Y]\d|[A-HK-Y]\d\d|\d[A-HJKSTUW]|[A-HK-Y]\d[ABEHMNPRV-Y])) ?\d[ABD-HJLNP-UW-Z]{2})$/).test(d)}return true});$.tools.validator.fn("[data-validation-type=telephone]","Please enter a valid post code.",function(c,d){if(d!=""){return(/((\+44\s?\(0\)\s?\d{2,4})|(\+44\s?(01|02|03|07|08)\d{2,3})|(\+44\s?(1|2|3|7|8)\d{2,3})|(\(\+44\)\s?\d{3,4})|(\(\d{5}\))|((01|02|03|07|08)\d{2,3})|(\d{5}))(\s|-|.)(((\d{3,4})(\s|-)(\d{3,4}))|((\d{6,7})))/).test(d)}return true});$.tools.validator.fn("[data-validation-type=mobile]","Please enter a valid post code.",function(c,d){if(d!=""){return(/^(\+44\s?7\d{3}|\(?07\d{3}\)?)\s?\d{3}\s?\d{3}$/).test(d)}return true});$.tools.validator.localizeFn("[type=time]",{en:"Please supply a valid time."});$.tools.validator.localize("en",{":email":"The email address you have entered is not valid.",":number":"Please enter a number only.",":url":'Please enter a valid web address. The web address must start with "http://"',"[max]":"The value you enter must not be bigger than $1.","[min]":"The value you enter must not be less than $1.","[required]":"This field is required. Please enter a value."});$(".has-validation").validator({position:"center right",offset:[0,-250],messageClass:"form-error",errorInputEvent:"blur",inputEvent:"keyup",message:'<div><span class="ui-icon ui-icon-closethick"></span></div>'}).attr("novalidate","novalidate");$("fieldset.fieldset-buttons > legend").each(function(){$(this).css({marginLeft:(Math.round($(this).parent().width()/2)-Math.round($(this).width()/2))+"px"})});$(".main-content").resize(function(){(typeof $(".isotope").isotope==="function")&&$(".isotope").isotope();$("fieldset.fieldset-buttons > legend").each(function(){$(this).css({marginLeft:(Math.round($(this).parent().width()/2)-Math.round($(this).width()/2))+"px"})})});if($.cookie){if($.cookie("menuCollapsed")==="1"){$(".main-section > nav").addClass("collapsed").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>');$(".main-content").resize()}else{if($.cookie("menuCollapsed")==="0"){$(".main-section > nav").removeClass("collapsed").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-w"></span>');$(".main-content").resize()}else{if($(".main-section > nav").hasClass("collapsed")){$(".main-section > nav").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>')}else{$(".main-section > nav").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>')}}}}$(".main-section > nav a.chevron").click(function(){if($(this).parent().toggleClass("collapsed").hasClass("collapsed")){$("span",this).removeClass("ui-icon-circle-triangle-w").addClass("ui-icon-circle-triangle-e");$.cookie&&$.cookie("menuCollapsed","1",{expires:adminCookieExpiry,path:"/"})}else{$("span",this).removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-w");$.cookie&&$.cookie("menuCollapsed","0",{expires:adminCookieExpiry,path:"/"})}$(".main-content").resize();return false});if($(sortableName).sortable){$(sortableName).sortable({cursor:"move",revert:500,opacity:0.7,appendTo:"body",handle:"header",items:"[draggable=true]",placeholder:"portlet-placeholder grid_2",forcePlaceholderSize:true,update:function(c,d){$.cookie&&$.cookie(sortableCookie,$(this).sortable("toArray"),{expires:adminCookieExpiry,path:"/"})}}).disableSelection()}$("textarea.tinymce-basic, textarea.tinymce-advanced").css("width","100%");if($("textarea.tinymce-basic").length>0){$("textarea.tinymce-basic").tinymce({script_url:"/bundles/webilluminationadmin/js/tinymce/tiny_mce.js",theme:"advanced",plugins:"contextmenu,paste,fullscreen,xhtmlxtras,advlist",theme_advanced_buttons1:"fullscreen,pasteword,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_resizing:true,content_css:"/bundles/webilluminationadmin/css/content.css"})}if($("textarea.tinymce-advanced").length>0){$("textarea.tinymce-advanced").tinymce({script_url:"/bundles/webilluminationadmin/js/tinymce/tiny_mce.js",theme:"advanced",plugins:"pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",theme_advanced_buttons1:"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",theme_advanced_buttons4:"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_resizing:true,content_css:"/bundles/webilluminationadmin/css/content.css"})}$("input.show-tinymce").change(function(){if($(this).val()==="1"){$($(this).attr("rel")).tinymce().show()}else{$($(this).attr("rel")).tinymce().hide()}});$.cookie&&restoreOrder(sortableName,sortableCookie);$.cookie&&$.cookie("background")&&changeBackground($.cookie("background"));$.cookie&&$.cookie("css")&&changeUicolor($.cookie("css"))}function loadImagePopup(d,c,b,a){if(c==""){c="Detailed View"}$("#dialog-image-popup-image").attr("src",d).attr("alt",c).attr("width",b).attr("height",a);$("#dialog-image-popup").dialog({autoOpen:false,autoResize:true,width:"auto",height:"auto",modal:true,show:"fade",hide:"fade"}).parents(".ui-dialog").find(".ui-dialog-titlebar-close").after("<div/>");$("#ui-dialog-title-dialog-image-popup").html(c);$("#dialog-image-popup").dialog("open")}function restoreOrder(f,k){var h=$(f);if(!h){return}var b=$.cookie(k);if(!b){return}var d=b.split(","),j=h.sortable("toArray"),g=[];for(var l=0;l<j.length;l++){g[j[l]]=j[l]}for(var e=0,c=d.length;e<c;e++){var a=d[e];if(a in g){$(f).append($(f).children("#"+a))}}}function saveCollapsed(a){$.cookie&&$.cookie("collapsedPortlets",a,{expires:adminCookieExpiry,path:"/"})}function changeBackground(a){$("body").removeClass($.cookie("background")).addClass(a);$.cookie&&$.cookie("background",a,{expires:adminCookieExpiry,path:"/"})}function changeUicolor(a){$("link.uicolor").attr("href",a);$.cookie&&$.cookie("css",a,{expires:adminCookieExpiry,path:"/"})}$.easing.drop=function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a};$.tools.overlay.addEffect("drop",function(d,a){var c=this.getConf(),b=this.getOverlay();if(c.fixed){d.position="fixed"}else{d.top+=$(window).scrollTop();d.left+=$(window).scrollLeft();d.position="absolute"}b.css(d).show();b.animate({top:"+=55",opacity:1,width:"+=20"},400,"drop",a)},function(a){this.getOverlay().animate({top:"-=55",opacity:0,width:"-=20"},300,"drop",function(){$(this).hide();a.call()})});if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return a}}return -1}}Array.prototype.includes=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return true}}return false};Array.prototype.remove=function(b){var a=this.indexOf(b);if(a!==-1){this.splice(a,1)}};function ajaxFlashMessage(a,b){if(a=="success"){$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-success ui-corner-all"><p><span class="ui-icon ui-icon-circle-check"></span><strong>SUCCESS:</strong> '+b+"</p></div></div>")}else{if(a=="error"){$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-error ui-corner-all"><p><span class="ui-icon ui-icon-alert"></span><strong>ERROR:</strong> '+b+"</p></div></div>")}else{$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-highlight ui-corner-all"><p><span class="ui-icon ui-icon-info"></span><strong>NOTICE:</strong> '+b+"</p></div></div>")}}$(".message.closeable").prepend('<span class="message-close ui-icon ui-icon-circle-close"></span>').find(".message-close").click(function(){$(this).parent().fadeOut(function(){$(this).remove()})})};