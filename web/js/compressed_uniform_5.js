(function(b){b.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:true,idPrefix:"uniform",resetSelector:false,autoHide:true},elements:[]};if(b.browser.msie&&b.browser.version<7){b.support.selectOpacity=false}else{b.support.selectOpacity=true}b.fn.uniform=function(q){q=b.extend(b.uniform.options,q);var a=this;if(q.resetSelector!=false){b(q.resetSelector).mouseup(function(){function c(){b.uniform.update(a)}setTimeout(c,10)})}function t(c){$el=b(c);$el.addClass($el.attr("type"));m(c)}function o(c){b(c).addClass("uniform");m(c)}function n(g){var f=b(g);var e=b("<div>"),c=b("<span>");e.addClass(q.buttonClass);if(q.useID&&f.attr("id")!=""){e.attr("id",q.idPrefix+"-"+f.attr("id"))}var d;if(f.is("a")||f.is("button")){d=f.html()}else{if(f.is(":submit")||f.is(":reset")||f.is("input[type=button]")){d=f.attr("value")}}d=d==""?f.is(":reset")?"Reset":"Submit":d;c.html(d);f.css("opacity",0);f.wrap(e);f.wrap(c);e=f.closest("div");c=f.closest("span");if(f.is(":disabled")){e.addClass(q.disabledClass)}e.bind({"mouseenter.uniform":function(){e.addClass(q.hoverClass)},"mouseleave.uniform":function(){e.removeClass(q.hoverClass);e.removeClass(q.activeClass)},"mousedown.uniform touchbegin.uniform":function(){e.addClass(q.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(q.activeClass)},"click.uniform touchend.uniform":function(i){if(b(i.target).is("span")||b(i.target).is("div")){if(g[0].dispatchEvent){var h=document.createEvent("MouseEvents");h.initEvent("click",true,true);g[0].dispatchEvent(h)}else{g[0].click()}}}});g.bind({"focus.uniform":function(){e.addClass(q.focusClass)},"blur.uniform":function(){e.removeClass(q.focusClass)}});b.uniform.noSelect(e);m(g)}function s(g){var f=b(g);var e=b("<div />"),c=b("<span />");if(!f.css("display")=="none"&&q.autoHide){e.hide()}e.addClass(q.selectClass);if(q.useID&&g.attr("id")!=""){e.attr("id",q.idPrefix+"-"+g.attr("id"))}var d=g.find(":selected:first");if(d.length==0){d=g.find("option:first")}c.html(d.html());g.css("opacity",0);g.wrap(e);g.before(c);e=g.parent("div");c=g.siblings("span");g.bind({"change.uniform":function(){c.html(g.find(":selected").html());e.removeClass(q.activeClass)},"focus.uniform":function(){e.addClass(q.focusClass)},"blur.uniform":function(){e.removeClass(q.focusClass);e.removeClass(q.activeClass)},"mousedown.uniform touchbegin.uniform":function(){e.addClass(q.activeClass)},"mouseup.uniform touchend.uniform":function(){e.removeClass(q.activeClass)},"click.uniform touchend.uniform":function(){e.removeClass(q.activeClass)},"mouseenter.uniform":function(){e.addClass(q.hoverClass)},"mouseleave.uniform":function(){e.removeClass(q.hoverClass);e.removeClass(q.activeClass)},"keyup.uniform":function(){c.html(g.find(":selected").html())}});if(b(g).attr("disabled")){e.addClass(q.disabledClass)}b.uniform.noSelect(c);m(g)}function p(d){var e=b(d);var f=b("<div />"),c=b("<span />");if(!e.css("display")=="none"&&q.autoHide){f.hide()}f.addClass(q.checkboxClass);if(q.useID&&d.attr("id")!=""){f.attr("id",q.idPrefix+"-"+d.attr("id"))}b(d).wrap(f);b(d).wrap(c);c=d.parent();f=c.parent();b(d).css("opacity",0).bind({"focus.uniform":function(){f.addClass(q.focusClass)},"blur.uniform":function(){f.removeClass(q.focusClass)},"click.uniform touchend.uniform":function(){if(!b(d).attr("checked")){c.removeClass(q.checkedClass)}else{c.addClass(q.checkedClass)}},"mousedown.uniform touchbegin.uniform":function(){f.addClass(q.activeClass)},"mouseup.uniform touchend.uniform":function(){f.removeClass(q.activeClass)},"mouseenter.uniform":function(){f.addClass(q.hoverClass)},"mouseleave.uniform":function(){f.removeClass(q.hoverClass);f.removeClass(q.activeClass)}});if(b(d).attr("checked")){c.addClass(q.checkedClass)}if(b(d).attr("disabled")){f.addClass(q.disabledClass)}m(d)}function l(d){var e=b(d);var f=b("<div />"),c=b("<span />");if(!e.css("display")=="none"&&q.autoHide){f.hide()}f.addClass(q.radioClass);if(q.useID&&d.attr("id")!=""){f.attr("id",q.idPrefix+"-"+d.attr("id"))}b(d).wrap(f);b(d).wrap(c);c=d.parent();f=c.parent();b(d).css("opacity",0).bind({"focus.uniform":function(){f.addClass(q.focusClass)},"blur.uniform":function(){f.removeClass(q.focusClass)},"click.uniform touchend.uniform":function(){if(!b(d).attr("checked")){c.removeClass(q.checkedClass)}else{var g=q.radioClass.split(" ")[0];b("."+g+" span."+q.checkedClass+":has([name='"+b(d).attr("name")+"'])").removeClass(q.checkedClass);c.addClass(q.checkedClass)}},"mousedown.uniform touchend.uniform":function(){if(!b(d).is(":disabled")){f.addClass(q.activeClass)}},"mouseup.uniform touchbegin.uniform":function(){f.removeClass(q.activeClass)},"mouseenter.uniform touchend.uniform":function(){f.addClass(q.hoverClass)},"mouseleave.uniform":function(){f.removeClass(q.hoverClass);f.removeClass(q.activeClass)}});if(b(d).attr("checked")){c.addClass(q.checkedClass)}if(b(d).attr("disabled")){f.addClass(q.disabledClass)}m(d)}function r(f){var i=b(f);var h=b("<div />"),e=b("<span>"+q.fileDefaultText+"</span>"),g=b("<span>"+q.fileBtnText+"</span>");if(!i.css("display")=="none"&&q.autoHide){h.hide()}h.addClass(q.fileClass);e.addClass(q.filenameClass);g.addClass(q.fileBtnClass);if(q.useID&&i.attr("id")!=""){h.attr("id",q.idPrefix+"-"+i.attr("id"))}i.wrap(h);i.after(g);i.after(e);h=i.closest("div");e=i.siblings("."+q.filenameClass);g=i.siblings("."+q.fileBtnClass);if(!i.attr("size")){var c=h.width();i.attr("size",c/10)}var d=function(){var j=i.val();if(j===""){j=q.fileDefaultText}else{j=j.split(/[\/\\]+/);j=j[(j.length-1)]}e.html(j)};d();i.css("opacity",0).bind({"focus.uniform":function(){h.addClass(q.focusClass)},"blur.uniform":function(){h.removeClass(q.focusClass)},"mousedown.uniform":function(){if(!b(f).is(":disabled")){h.addClass(q.activeClass)}},"mouseup.uniform":function(){h.removeClass(q.activeClass)},"mouseenter.uniform":function(){h.addClass(q.hoverClass)},"mouseleave.uniform":function(){h.removeClass(q.hoverClass);h.removeClass(q.activeClass)}});if(b.browser.msie){i.bind("click.uniform.ie7",function(){setTimeout(d,0)})}else{i.bind("change.uniform",d)}if(i.attr("disabled")){h.addClass(q.disabledClass)}b.uniform.noSelect(e);b.uniform.noSelect(g);m(f)}b.uniform.restore=function(c){if(c==undefined){c=b(b.uniform.elements)}b(c).each(function(){if(b(this).is(":checkbox")){b(this).unwrap().unwrap()}else{if(b(this).is("select")){b(this).siblings("span").remove();b(this).unwrap()}else{if(b(this).is(":radio")){b(this).unwrap().unwrap()}else{if(b(this).is(":file")){b(this).siblings("span").remove();b(this).unwrap()}else{if(b(this).is("button, :submit, :reset, a, input[type='button']")){b(this).unwrap().unwrap()}}}}}b(this).unbind(".uniform");b(this).css("opacity","1");var d=b.inArray(b(c),b.uniform.elements);b.uniform.elements.splice(d,1)})};function m(c){c=b(c).get();if(c.length>1){b.each(c,function(e,d){b.uniform.elements.push(d)})}else{b.uniform.elements.push(c)}}b.uniform.noSelect=function(c){function d(){return false}b(c).each(function(){this.onselectstart=this.ondragstart=d;b(this).mousedown(d).css({MozUserSelect:"none"})})};b.uniform.update=function(c){if(c==undefined){c=b(b.uniform.elements)}c=b(c);c.each(function(){var e=b(this);if(e.is("select")){var f=e.siblings("span");var d=e.parent("div");d.removeClass(q.hoverClass+" "+q.focusClass+" "+q.activeClass);f.html(e.find(":selected").html());if(e.is(":disabled")){d.addClass(q.disabledClass)}else{d.removeClass(q.disabledClass)}}else{if(e.is(":checkbox")){var f=e.closest("span");var d=e.closest("div");d.removeClass(q.hoverClass+" "+q.focusClass+" "+q.activeClass);f.removeClass(q.checkedClass);if(e.is(":checked")){f.addClass(q.checkedClass)}if(e.is(":disabled")){d.addClass(q.disabledClass)}else{d.removeClass(q.disabledClass)}}else{if(e.is(":radio")){var f=e.closest("span");var d=e.closest("div");d.removeClass(q.hoverClass+" "+q.focusClass+" "+q.activeClass);f.removeClass(q.checkedClass);if(e.is(":checked")){f.addClass(q.checkedClass)}if(e.is(":disabled")){d.addClass(q.disabledClass)}else{d.removeClass(q.disabledClass)}}else{if(e.is(":file")){var d=e.parent("div");var g=e.siblings(q.filenameClass);btnTag=e.siblings(q.fileBtnClass);d.removeClass(q.hoverClass+" "+q.focusClass+" "+q.activeClass);g.html(e.val());if(e.is(":disabled")){d.addClass(q.disabledClass)}else{d.removeClass(q.disabledClass)}}else{if(e.is(":submit")||e.is(":reset")||e.is("button")||e.is("a")||c.is("input[type=button]")){var d=e.closest("div");d.removeClass(q.hoverClass+" "+q.focusClass+" "+q.activeClass);if(e.is(":disabled")){d.addClass(q.disabledClass)}else{d.removeClass(q.disabledClass)}}}}}}})};return this.each(function(){if(b.support.selectOpacity){var c=b(this);if(c.is("select")){if(c.attr("multiple")!=true){if(c.attr("size")==undefined||c.attr("size")<=1){s(c)}}}else{if(c.is(":checkbox")){p(c)}else{if(c.is(":radio")){l(c)}else{if(c.is(":file")){r(c)}else{if(c.is(":text, :password, input[type='email']")){t(c)}else{if(c.is("textarea")){o(c)}else{if(c.is("a")||c.is(":submit")||c.is(":reset")||c.is("button")||c.is("input[type=button]")){n(c)}}}}}}}}})}})(jQuery);