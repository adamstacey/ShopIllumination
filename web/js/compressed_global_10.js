(function(a){a.fn.hoverIntent=function(l,h){var m={sensitivity:7,interval:250,timeout:0};m=a.extend(m,h?{over:l,out:h}:l);var i,n,k,c;var b=function(f){i=f.pageX;n=f.pageY};var j=function(f,g){g.hoverIntent_t=clearTimeout(g.hoverIntent_t);if((Math.abs(k-i)+Math.abs(c-n))<m.sensitivity){a(g).unbind("mousemove",b);g.hoverIntent_s=1;return m.over.apply(g,[f])}else{k=i;c=n;g.hoverIntent_t=setTimeout(function(){j(f,g)},m.interval)}};var e=function(f,g){g.hoverIntent_t=clearTimeout(g.hoverIntent_t);g.hoverIntent_s=0;return m.out.apply(g,[f])};var d=function(o){var f=jQuery.extend({},o);var g=this;if(g.hoverIntent_t){g.hoverIntent_t=clearTimeout(g.hoverIntent_t)}if(o.type=="mouseenter"){k=f.pageX;c=f.pageY;a(g).bind("mousemove",b);if(g.hoverIntent_s!=1){g.hoverIntent_t=setTimeout(function(){j(f,g)},m.interval)}}else{a(g).unbind("mousemove",b);if(g.hoverIntent_s==1){g.hoverIntent_t=setTimeout(function(){e(f,g)},m.timeout)}}};return this.bind("mouseenter",d).bind("mouseleave",d)}})(jQuery);(function(x,o,n,w,p){var A=x(w),r="waypoint.reached",z=function(a,b){a.element.trigger(r,b);if(a.options.triggerOnce){a.element[o]("destroy")}},t=function(c,a){if(!a){return -1}var b=a.waypoints.length-1;while(b>=0&&a.waypoints[b].element[0]!==c[0]){b-=1}return b},u=[],v=function(a){x.extend(this,{element:x(a),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:x.proxy(function(){var b=this.element.scrollTop(),f=b>this.oldScroll,d=this,c=x.grep(this.waypoints,function(g,h){return f?(g.offset>d.oldScroll&&g.offset<=b):(g.offset<=d.oldScroll&&g.offset>b)}),e=c.length;if(!this.oldScroll||!b){x[n]("refresh")}this.oldScroll=b;if(!e){return}if(!f){c.reverse()}x.each(c,function(g,h){if(h.options.continuous||g===e-1){z(h,[f?"down":"up"])}})},this)});x(a).bind("scroll.waypoints",x.proxy(function(){if(!this.didScroll){this.didScroll=true;w.setTimeout(x.proxy(function(){this.doScroll();this.didScroll=false},this),x[n].settings.scrollThrottle)}},this)).bind("resize.waypoints",x.proxy(function(){if(!this.didResize){this.didResize=true;w.setTimeout(x.proxy(function(){x[n]("refresh");this.didResize=false},this),x[n].settings.resizeThrottle)}},this));A.load(x.proxy(function(){this.doScroll()},this))},s=function(b){var a=null;x.each(u,function(d,c){if(c.element[0]===b){a=c;return false}});return a},q={init:function(a,b){this.each(function(){var d=x.fn[o].defaults.context,c,g=x(this);if(b&&b.context){d=b.context}if(!x.isWindow(d)){d=g.closest(d)[0]}c=s(d);if(!c){c=new v(d);u.push(c)}var h=t(g,c),f=h<0?x.fn[o].defaults:c.waypoints[h].options,e=x.extend({},f,b);e.offset=e.offset==="bottom-in-view"?function(){var i=x.isWindow(d)?x[n]("viewportHeight"):x(d).height();return i-x(this).outerHeight()}:e.offset;if(h<0){c.waypoints.push({element:g,offset:null,options:e})}else{c.waypoints[h].options=e}if(a){g.bind(r,a)}if(b&&b.handler){g.bind(r,b.handler)}});x[n]("refresh");return this},remove:function(){return this.each(function(a,c){var b=x(c);x.each(u,function(e,f){var d=t(b,f);if(d>=0){f.waypoints.splice(d,1);if(!f.waypoints.length){f.element.unbind("scroll.waypoints resize.waypoints");u.splice(e,1)}}})})},destroy:function(){return this.unbind(r)[o]("remove")}},y={refresh:function(){x.each(u,function(b,c){var a=x.isWindow(c.element[0]),f=a?0:c.element.offset().top,e=a?x[n]("viewportHeight"):c.element.height(),d=a?0:c.element.scrollTop();x.each(c.waypoints,function(h,k){if(!k){return}var j=k.options.offset,g=k.offset;if(typeof k.options.offset==="function"){j=k.options.offset.apply(k.element)}else{if(typeof k.options.offset==="string"){var i=parseFloat(k.options.offset);j=k.options.offset.indexOf("%")?Math.ceil(e*(i/100)):i}}k.offset=k.element.offset().top-f+d-j;if(k.options.onlyOnScroll){return}if(g!==null&&c.oldScroll>g&&c.oldScroll<=k.offset){z(k,["up"])}else{if(g!==null&&c.oldScroll<g&&c.oldScroll>=k.offset){z(k,["down"])}else{if(!g&&c.element.scrollTop()>k.offset){z(k,["down"])}}}});c.waypoints.sort(function(g,h){return g.offset-h.offset})})},viewportHeight:function(){return(w.innerHeight?w.innerHeight:A.height())},aggregate:function(){var a=x();x.each(u,function(b,c){x.each(c.waypoints,function(d,e){a=a.add(e.element)})});return a}};x.fn[o]=function(a){if(q[a]){return q[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof a==="function"||!a){return q.init.apply(this,arguments)}else{if(typeof a==="object"){return q.init.apply(this,[null,a])}else{x.error("Method "+a+" does not exist on jQuery "+o)}}}};x.fn[o].defaults={continuous:true,offset:0,triggerOnce:false,context:w};x[n]=function(a){if(y[a]){return y[a].apply(this)}else{return y.aggregate()}};x[n].settings={resizeThrottle:200,scrollThrottle:100};A.load(function(){x[n]("refresh")})})(jQuery,"waypoint","waypoints",window);(function(a){a.caretTo=function(c,d){if(c.createTextRange){var b=c.createTextRange();b.move("character",d);b.select()}else{if(c.selectionStart!=null){c.focus();c.setSelectionRange(d,d)}}};a.caretPos=function(c){if("selection" in document){var b=c.createTextRange();try{b.setEndPoint("EndToStart",document.selection.createRange())}catch(d){return 0}return b.text.length}else{if(c.selectionStart!=null){return c.selectionStart}}};a.fn.caret=function(c,b){if(typeof(c)==="undefined"){return a.caretPos(this.get(0))}return this.queue(function(d){if(isNaN(c)){var e=a(this).val().indexOf(c);if(b===true){e+=c.length}else{if(typeof(b)!=="undefined"){e+=b}}a.caretTo(this,e)}else{a.caretTo(this,c)}d()})};a.fn.caretToStart=function(){return this.caret(0)};a.fn.caretToEnd=function(){return this.queue(function(b){a.caretTo(this,a(this).val().length);b()})}}(jQuery));var fixWidthHelper=function(b,a){a.children().each(function(){$(this).width($(this).width())});return a};(function(a){a.fn.placeholder=function(b){return this.each(function(){if(!("placeholder" in document.createElement(this.tagName.toLowerCase()))){var c=a(this),d=c.attr("placeholder");c.val(d).data("color",c.css("color")).css("color","#aaa");c.focus(function(){if(a.trim(c.val())===d){c.val("").css("color",c.data("color"))}}).blur(function(){if(!a.trim(c.val())){c.val(d).data("color",c.css("color")).css("color","#aaa")}})}})}}(jQuery));var menuYloc=null;var adminCookieExpiry=365;var sortableCookie="sortable-order";var sortableName=".sortable";function resetMessages(){$("#message-error, #message-notice, #message-success").slideUp()}function checkFloatingButtons(){if($("#float-buttons-content").length>0){$("#float-buttons-content").removeClass("float-buttons-sticky");var a=$("#float-buttons-content").offset().top+$("#float-buttons-content").outerHeight()-$(window).scrollTop();if(a>$(window).height()){$("#float-buttons-content").addClass("float-buttons-sticky")}else{$("#float-buttons-content").removeClass("float-buttons-sticky")}}}function checkMaximumCharcaters(e,d){if(e){var c=e.val();var b="";var a=0;if(c.length<=d){a=d-c.length;b="<strong>Max Characters:</strong> "+d+' (You have <strong class="green">'+a+"</strong> character";if(a!=1){b=b+"s"}b=b+" remaining)"}else{a=c.length-d;b="<strong>Max Characters:</strong> "+d+' (You have used <strong class="red">'+a+"</strong> character";if(a!=1){b=b+"s"}b=b+" too many)"}return b}return""}$(window).load(function(){$("#loading").fadeOut(function(){$(this).remove();$("body").removeAttr("style")});var b=0;if($("td.buttons-container:eq(0) .button").length>0){$("td.buttons-container:eq(0) .button").each(function(){b=b+$(this).outerWidth(true)})}if(b>0){$(".buttons-spacer").width(b).attr("width",b)}checkFloatingButtons();if($("#update-listing-filter-empty")&&$("#listing")){if($("#update-listing-filter-empty").val()<1){$("html, body").animate({scrollTop:$("#listing").offset().top-20},"slow")}}if($("#wrapper section.main-section nav ul li").length>0){var a=20;if($("#wrapper section.main-section nav ul li").length>0){$("#wrapper section.main-section nav ul li").each(function(){a=a+parseInt($(this).outerHeight(true))})}$("#wrapper section.main-section nav").css("min-height",a);$("#wrapper section.main-section div.main-content").css("min-height",$("#wrapper section.main-section nav").outerHeight(true))}$(".preview-list table tr:odd:not(.no-row-colour)").addClass("odd");$("table.data-table > tbody > tr:odd:not(.no-row-colour)").addClass("odd");if($(".sidebar-tabs").length>0){$(".sidebar-tabs").each(function(){var c=0;$(this).find("ul li").each(function(){c=c+parseInt($(this).outerHeight(true))});c=c-15;if(c>$(this).find("section").outerHeight(true)){$(this).find("section").height(c)}})}if($("a.auto-click").length>0){$("#ajax_loading").show();window.setTimeout(function(){$("a.auto-click")[0].click();$("#ajax_loading").hide()},5000)}$("div.selector > select.ui-corner-none").each(function(){$(this).parent().addClass("ui-corner-none").find("span").addClass("ui-corner-none")})});function resetFromValidation(){$(".has-validation").validator({position:"center right",offset:[0,-250],messageClass:"form-error",errorInputEvent:"blur",inputEvent:"keyup",message:"<div><em/></div>"}).attr("novalidate","novalidate")}function addFormRow(){$("#add input, #add textarea, #add select").removeClass("invalid");$(".form-error").remove();$(".action-select-add").attr("checked",false);$(".action-select-add").parent().removeClass("checked");$("tr.item-add").removeClass("selected");$("#data-add > tbody > tr:first").clone().appendTo("#data-add > tbody");$("#data-add > tbody > tr:last input, #data-add > tbody > tr:last textarea, #data-add > tbody > tr:last select").each(function(){$(this).removeClass("no-uniform");$(this).attr("id",$(this).attr("data-id")+"-"+$("#data-add > tbody > tr").length);$(this).attr("name",$(this).attr("data-name")+"["+$("#data-add > tbody > tr").length+"]")});$("#data-add > tbody > tr:last input[data-add-required='required'], #data-add > tbody > tr:last textarea[data-add-required='required'], #data-add > tbody > tr:last select[data-add-required='required']").removeAttr("data-add-required").attr("required","required");$("#data-add > tbody > tr:last :checkbox, #data-add > tbody > tr:last :radio, #data-add > tbody > tr:last select, #data-add > tbody > tr:last :file").uniform();$.uniform.update();resetFromValidation();$("#data-add > tbody > tr:last").removeClass("ui-helper-hidden");$("#data-add > tbody > tr:last").removeAttr("id");$("#data-add tr").removeClass("odd");$("#data-add tr:odd").addClass("odd")}function updateResults(){$("#ajax_loading").show();$("#update-listing-date-from").val($("#filter-date-from").val());$("#update-listing-date-from-formatted").val($("#filter-date-from-formatted").val());$("#update-listing-date-to").val($("#filter-date-to").val());$("#update-listing-date-to-formatted").val($("#filter-date-to-formatted").val());$(".filter-text-box").each(function(){$("#"+$(this).attr("data-update-object")).val($(this).val())});$("#listing-filter td.checkboxes").each(function(){$(this).find("input[type='checkbox']:eq(0)").each(function(){var a=new Array();$("#listing-filter input[type='checkbox'][data-update-object='"+$(this).attr("data-update-object")+"']").each(function(b){if($(this).is(":checked")){a[a.length]=$(this).attr("data-filter-value")}});if(a.length>0){$("#"+$(this).attr("data-update-object")).val("|"+a.join("|")+"|")}else{$("#"+$(this).attr("data-update-object")).val("")}})});$("#update-listing-current-page").val("1");$("#update-listing-filter-empty").val("0");$("#form-update-listing").submit()}function updateFlatSortableList(b){var a=$("#flat-sortable-list-"+b);var e=$("input.flat-sortable-list-values[data-flat-sortable-list-object='"+b+"']");var d=$("select.flat-sortable-list-parts[data-flat-sortable-list-object='"+b+"']");var f=$("input.free-text[data-flat-sortable-list-object='"+b+"']");var c=new Array();if(a.find("li").length>0){a.find("li").each(function(){if($(this).attr("data-value")){c[c.length]=$(this).attr("data-value")}});e.val(c.join("^"))}f.val("");f.attr("disabled","disabled");d.find("option:selected").removeAttr("selected");d.find("option:first").attr("selected","selected");d.parent().find("span:first").html(d.find("option:first").text())}$(document).ready(function(){$("#ajax_loading").hide();if($(".floating-buttons-toolbar")){$("body").css("padding-bottom",$(".floating-buttons-toolbar").outerHeight(true)+"px")}$("nav li").each(function(){var i=$(this).attr("data-notification");if(($(this).attr("data-notification")!="")&&($(this).attr("data-notification")!=undefined)){$(this).append('<div class="button-notification">'+$(this).attr("data-notification")+"</div>")}});$.waypoints.settings.scrollThrottle=20;if($("#float-buttons")){$("#float-buttons").waypoint(function(j,i){$("#float-buttons-content").toggleClass("float-buttons-sticky",i==="up")},{offset:function(){return $.waypoints("viewportHeight")-$(this).outerHeight()}})}$(".action-hide").live("click",function(){$("#"+$(this).attr("data-object-to-hide")).hide()});$(".form-element .info-message-icon, .form-element .info-message-icon-left, .form-element .info-message-icon-right").live("mouseenter",function(){var i=$(this).attr("data-help-container");$("#form-help-"+i).slideDown()});$(".form-help").live("mouseleave",function(){$(this).slideUp()});$("form:not(.has-validation)").submit(function(){$("#ajax_loading").show()});if($("#update-listing-pagination")){var h=parseInt($("#update-listing-pagination").val());if(h>5){var b=parseInt($("#update-listing-current-page").val());var g=1;var e=5;$("li.page-navigation").hide();$("li.page-navigation[data-page='"+b.toString()+"']").show();for(var a=1;a<6;a++){var d=b-a;var f=b+a;if($("li.page-navigation[data-page='"+d.toString()+"']").length>0){if(g<e){$("li.page-navigation[data-page='"+d.toString()+"']").show();g++}}if($("li.page-navigation[data-page='"+f.toString()+"']").length>0){if(g<e){$("li.page-navigation[data-page='"+f.toString()+"']").show();g++}}}}}$(".page-navigation").live("click",function(){$("#ajax_loading").show();$("#update-listing-current-page").val(parseInt($(this).attr("data-page")));$("#form-update-listing").submit()});$("#listing-sort-order").live("change",function(){$("#ajax_loading").show();$("#update-listing-sort-order").val($(this).val());$("#update-listing-current-page").val("1");$("#form-update-listing").submit()});$("#listing-max-results").live("change",function(){$("#ajax_loading").show();$("#update-listing-max-results").val(parseInt($(this).val()));$("#update-listing-current-page").val("1");$("#form-update-listing").submit()});$("select.filter-listing").live("change",function(){$("#ajax_loading").show();var l=$(this).attr("data-listing-object");var k=$("#listing-"+l);var n=$(this).attr("data-listing-title");var i=$("#listing-title-"+l);var m=$(this).attr("data-filter");var j=$(this).val();k.find("tbody:eq(0) > tr").each(function(){var o=$(this);o.show();var r=false;var q=false;if(j){if(o.attr("data-"+m)!=j){r=true}}if(!r){if(k.find(".quick-filter:eq(0)").length>0){var p=k.find(".quick-filter:eq(0)").val();$(this).find(".filterable").each(function(){$searchValue=$(this).html();if($searchValue.toLowerCase().indexOf(p.toLowerCase())>-1){q=true}})}else{q=true}}if(!q){$(this).hide()}});if(n&&i){i.html(n+" ("+k.find("tbody:eq(0) > tr:visible").length+")")}$(".action-select-all").attr("checked",false);$(".action-select-all").parent().removeClass("checked");$("table.data-table > tbody:eq(0) > tr").removeClass("odd");$("table.data-table > tbody:eq(0) > tr:visible:odd").addClass("odd");if($("#wrapper section.main-section nav").outerHeight(true)>$("#wrapper section.main-section div.main-content").outerHeight(true)){$("#wrapper section.main-section div.main-content").css("min-height",$("#wrapper section.main-section nav").outerHeight(true))}else{$("#wrapper section.main-section div.main-content").css("min-height","")}checkFloatingButtons();$("#ajax_loading").hide()});$("select.quick-link").live("change",function(i){window.location=$(this).val()});$(".quick-filter").live("keypress",function(n){var j=n.keyCode||n.which;if(j==13){$("#ajax_loading").show();n.preventDefault();var m=$(this).attr("data-listing-object");var l=$("#listing-"+m);var o=$(this).attr("data-listing-title");var i=$("#listing-title-"+$(this).attr("data-listing-object"));var k=$(this).val();l.find("tbody:eq(0) > tr").each(function(){var p=$(this);p.show();var r=false;var q=false;$("select.filter-listing").each(function(){if(m==$(this).attr("data-listing-object")){if($(this).val()){if(p.attr("data-"+$(this).attr("data-filter"))!=$(this).val()){r=true}}}});if(!r){$(this).find(".filterable").each(function(){$searchValue=$(this).html();if($searchValue.toLowerCase().indexOf(k.toLowerCase())>-1){q=true}})}if(!q){$(this).hide()}});if(o&&i){i.html(o+" ("+l.find("tbody:eq(0) > tr:visible").length+")")}$(".action-select-all").attr("checked",false);$(".action-select-all").parent().removeClass("checked");$("table.data-table > tbody:eq(0) > tr").removeClass("odd");$("table.data-table > tbody:eq(0) > tr:visible:odd").addClass("odd");if($("#wrapper section.main-section nav").outerHeight(true)>$("#wrapper section.main-section div.main-content").outerHeight(true)){$("#wrapper section.main-section div.main-content").css("min-height",$("#wrapper section.main-section nav").outerHeight(true))}else{$("#wrapper section.main-section div.main-content").css("min-height","")}checkFloatingButtons();$("#ajax_loading").hide();return false}return true});$(".action-increase-quantity").live("click",function(){var i=$("#"+$(this).attr("data-quantity-object"));var j=parseInt(i.val())+1;i.val(j)});$(".action-decrease-quantity").live("click",function(){var i=$("#"+$(this).attr("data-quantity-object"));var j=parseInt(i.val())-1;if(j<1){j=1}i.val(j)});$("button.apply-to-all").live("click",function(){$("select.apply-to-all").each(function(){if($(this).val()!=""){var i=$("#listing-"+$(this).attr("data-listing-object"));var k=$(this).attr("data-item-class");var j=$(this).val();var l=$(this).find("option[value='"+j+"']").text();i.find("select."+k).each(function(){$(this).val(j);$(this).find("option").removeAttr("selected");$(this).find("option[value='"+j+"']").attr("selected","selected");$(this).prev().html(l);$(this).change()})}})});$(".action-quick-search").live("click",function(){$("#ajax_loading").show();if($("#form-quick-search").val()){$("#update-listing-current-page").val("1");$("#update-listing-search").val($("#form-quick-search").val());$("#form-update-listing").submit()}else{$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");$(".filter-text-box").each(function(){$(this).val("")});$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()}});$(".action-clear-quick-search").live("click",function(){$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");$(".filter-text-box").each(function(){$(this).val("")});$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()});$("#form-quick-search").live("keypress",function(j){var i=j.keyCode||j.which;if(i==13){$("#ajax_loading").show();if($("#form-quick-search").val()){$("#update-listing-current-page").val("1");$("#update-listing-search").val($("#form-quick-search").val());$("#form-update-listing").submit()}else{$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");$(".filter-text-box").each(function(){$(this).val("")});$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()}}});$("a.extra-action, button.extra-action").live("click",function(){$("#ajax_loading").show();var j=$(this).attr("data-form-action");if(j!=""){$("#form-update").attr("action",j)}var i=$(this).attr("data-form-target");if(i!=""){$("#form-update").attr("target",i)}$("#form-extra-action").val($(this).attr("data-extra-action"));$("#form-update").submit()});$("select.extra-action").live("change",function(){$("#ajax_loading").show();var k=$(this).find("option[value='"+$(this).val()+"']");var j=k.attr("data-form-action");if(j!=""){$("#form-update").attr("action",j)}var i=k.attr("data-form-target");if(i!=""){$("#form-update").attr("target",i)}$("#form-extra-action").val($(this).val());$(this).find("option").removeAttr("selected");$(this).prev().html($(this).find("option[value='']").text());$(this).find("option:eq(0)").attr("selected","selected");$("#form-update").submit()});$(".maximum-characters").each(function(){var j=$(this);var i=$(this).attr("data-maximum-characters");var k=$("#"+$(this).attr("data-maximum-characters-object"));k.html(checkMaximumCharcaters(j,i))});$(".maximum-characters").live("keyup",function(){var j=$(this);var i=$(this).attr("data-maximum-characters");var k=$("#"+$(this).attr("data-maximum-characters-object"));k.html(checkMaximumCharcaters(j,i))});$("#form-update table.data-table td input, #form-update table.data-table td textarea, #form-update table.data-table td select").live("change",function(){if(!$(this).hasClass("action-select")){var i=$(this).attr("data-id");$("tr#item-"+i).addClass("selected");$("tr#item-"+i+" td.select input.action-select").attr("checked","checked");$("tr#item-"+i+" td.select div.checker span").addClass("checked")}});$("#form-update table.data-table td .action-increase-quantity, #form-update table.data-table td .action-decrease-quantity, #form-update table.data-table td :checkbox, #form-update table.data-table td :radio, #form-update table.data-table td :file").live("click",function(){if(!$(this).hasClass("action-select")){var i=$(this).attr("data-id");$("tr#item-"+i).addClass("selected");$("tr#item-"+i+" td.select input.action-select").attr("checked","checked");$("tr#item-"+i+" td.select div.checker span").addClass("checked")}});$("#form-update table.data-table td input").live("keypress",function(j){var i=j.keyCode||j.which;if(i==13){j.preventDefault()}});$(".flat-sortable-list img").live("mousedown",function(i){i.preventDefault();return false});$(".flat-sortable-list ul").sortable({helper:fixWidthHelper,update:function(j,i){updateFlatSortableList(i.item.attr("data-flat-sortable-list-object"))}}).disableSelection();$("input.free-text").live("keypress",function(k){var j=$(this).attr("data-flat-sortable-list-object");var i=k.keyCode||k.which;if(i==13){k.preventDefault();$("button.action-add-flat-sortable-list-item[data-flat-sortable-list-object='"+j+"']").click()}});$(".action-delete-flat-sortable-list-item").live("click",function(){var i=$(this).parent().attr("data-flat-sortable-list-object");$(this).parent().remove();updateFlatSortableList(i)});$(".flat-sortable-list-parts").live("change",function(){var i=$("input.free-text[data-flat-sortable-list-object='"+$(this).attr("data-flat-sortable-list-object")+"']");if($(this).val()=="freeText"){i.removeAttr("disabled");if($(this).find("option:selected").text()!="Free Text"){i.val($(this).find("option:selected").text())}i.focus()}else{i.val("");i.attr("disabled","disabled")}});$(".action-add-flat-sortable-list-item").live("click",function(){var k=$(this).attr("data-flat-sortable-list-object");var m=k.replace("-template","");var i=$("#flat-sortable-list-"+k);var l=$("select.flat-sortable-list-parts[data-flat-sortable-list-object='"+k+"']");var o=$("input.free-text[data-flat-sortable-list-object='"+k+"']");var j=i.find("li").length+1;if(l.val()!=""){var n="";if((l.val()=="freeText")&&(o.val()!="")){n='<li data-flat-sortable-list-object="'+k+'" id="flat-sortable-list-'+m+"-item-"+j+'" data-value="freeText|'+o.val()+'">Free Text: "'+o.val()+'"<a class="action-delete-flat-sortable-list-item button ui-button-red ui-corner-right icon-set-white" data-icon-primary="ui-icon-circle-cross" data-icon-only="true">Delete</a></li>'}else{if(l.val()!="freeText"){n='<li data-flat-sortable-list-object="'+k+'" id="flat-sortable-list-'+m+"-item-"+j+'" data-value="'+l.val()+'">'+l.find("option[value='"+l.val()+"']").text()+'<a class="action-delete-flat-sortable-list-item button ui-button-red ui-corner-right icon-set-white" data-icon-primary="ui-icon-circle-cross" data-icon-only="true">Delete</a></li>'}}if(n!=""){i.append(n);if($("#flat-sortable-list-"+m+"-item-"+j+" .button").length>0){$("#flat-sortable-list-"+m+"-item-"+j+" .button").each(function(){$(this).button({icons:{primary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-primary"):null,secondary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-secondary"):null},text:$(this).attr("data-icon-only")==="true"?false:true})})}updateFlatSortableList(k)}}});$("#add .action-multiple-delete-add").live("click",function(){if($("#add .action-select-add:checked").length>0){$("#add .action-select-add:checked").each(function(){$(this).parent().parent().parent().parent().remove()})}if($("#data-add tbody tr").length<2){addFormRow()}$(".action-select-all-add").attr("checked",false);$(".action-select-all-add").parent().removeClass("checked");$("#data-add tr").removeClass("odd");$("#data-add tr:odd").addClass("odd")});var c=function(j,i){i.children().each(function(){$(this).width($(this).width())});return i};$("table.sortable tbody").sortable({helper:c,update:function(k,i){$("#ajax_loading").show();var j=0;var l=0;if($("table.sortable tbody tr").length>0){$("table.sortable tbody tr").each(function(){var m=$(this).find(".listing-display-order");if(m.val()!=j){$(this).removeClass("selected").addClass("selected");$(this).find("td.select div.checker span").removeClass("checked").addClass("checked");$(this).find("td.select div.checker span input").attr("checked","checked");l=1}m.val(j);j++})}if($("#form-save-required")){$("#form-save-required").val(l)}$("table.sortable tbody tr").removeClass("odd");$("table.sortable tbody tr:odd").addClass("odd");$("#ajax_loading").hide()}}).disableSelection();$(".update-filter").live("click",function(){$("#ajax_loading").show();$("#form-update-listing input[type='hidden']").val("");$("#"+$(this).attr("data-update-object")).val("|"+$(this).attr("data-filter-value")+"|");$("#update-listing-sort-order").val($("#listing-sort-order").val());$("#update-listing-max-results").val(parseInt($("#listing-max-results").val()));$("#update-listing-current-page").val("1");$("#update-listing-filter-empty").val("1");$("#form-update-listing").submit()});$(".tooltip-preview-left, .tooltip-preview-right").hoverIntent(function(){$(".tooltip").hide();var i=$(this);var m=parseInt($(".main-section").outerWidth(true));var l=i.position();var k=i.outerWidth(true);var o=i.outerHeight(true);var j=m-350;var n=$(i.attr("data-tooltip-id"));if((i.attr("data-ajax-path")!="")&&(i.attr("data-ajax-path")!=undefined)){if(n.find(".tooltip-content").html()==""){$.ajax({type:"GET",url:i.attr("data-ajax-path"),beforeSend:function(){$("#ajax_loading").show()},data:{id:i.attr("data-id")},error:function(){$("#ajax_loading").hide()},success:function(p){n.find(".tooltip-content").html(p);n.css({position:"absolute",visibility:"hidden",display:"block"});$tooltipHeight=n.outerHeight(true);$tooltipWidth=n.outerWidth(true);if($tooltipWidth>j){$tooltipWidth=j}n.css({position:"",visibility:"",display:""});$tooltipTop=parseInt(l.top-(($tooltipHeight-o)/2));if(($("#listing").offset().top+$tooltipTop)<($(window).scrollTop()+10)){$tooltipTop=$tooltipTop+(($(window).scrollTop()+10)-($("#listing").offset().top+$tooltipTop))}else{if(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)>($(window).outerHeight(true)+$(window).scrollTop())){$tooltipTop=$tooltipTop-(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)-($(window).outerHeight(true)+$(window).scrollTop()))}}if(i.hasClass("tooltip-preview-left")){$tooltipLeft=parseInt(l.left+k+6)}else{$tooltipLeft=parseInt(l.left-$tooltipWidth-26)}n.css({width:$tooltipWidth,top:$tooltipTop,left:$tooltipLeft});n.show();$("#ajax_loading").hide()}})}else{n.show()}}else{n.css({position:"absolute",visibility:"hidden",display:"block"});$tooltipHeight=n.outerHeight(true);$tooltipWidth=n.outerWidth(true);if($tooltipWidth>j){$tooltipWidth=j}n.css({position:"",visibility:"",display:""});$tooltipTop=parseInt(l.top-(($tooltipHeight-o)/2));if(($("#listing").offset().top+$tooltipTop)<($(window).scrollTop()+10)){$tooltipTop=$tooltipTop+(($(window).scrollTop()+10)-($("#listing").offset().top+$tooltipTop))}else{if(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)>($(window).outerHeight(true)+$(window).scrollTop())){$tooltipTop=$tooltipTop-(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)-($(window).outerHeight(true)+$(window).scrollTop()))}}if(i.hasClass("tooltip-preview-left")){$tooltipLeft=parseInt(l.left+k+6)}else{$tooltipLeft=parseInt(l.left-$tooltipWidth-26)}n.css({width:$tooltipWidth,top:$tooltipTop,left:$tooltipLeft});n.show()}},function(){$(".tooltip").hide()});$(".range-slider").each(function(){var m=$(this);var i=parseInt(m.attr("data-min"));if(i<1){i=1}var j=parseInt(m.attr("data-from-value"));if(j<1){j=i}var o=parseInt(m.attr("data-max"));if(o<1){o=10000}var k=parseInt(m.attr("data-to-value"));if(k<1){k=o}var l=$(m.attr("data-from-object"));var n=$(m.attr("data-to-object"));if(l&&n&&(m.hasClass("filter"))){m.slider({range:true,min:i,max:o,values:[j,k],slide:function(q,p){l.val(p.values[0]);n.val(p.values[1])},change:function(q,p){updateResults()}})}else{if(m.hasClass("filter")){m.slider({range:true,min:i,max:o,values:[j,k],change:function(q,p){updateResults()}})}else{if(l&&n){m.slider({range:true,min:i,max:o,values:[j,k],slide:function(q,p){l.val(p.values[0]);n.val(p.values[1])}})}else{m.slider({range:true,min:i,max:o,values:[j,k]})}}}});$(".date-picker").each(function(){var i=$(this);var j=$(this).attr("data-alt-field");if((typeof j!=="undefined")&&(j!==false)&&(i.hasClass("filter-text-box"))){i.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",altField:j,altFormat:"yy-mm-dd",onSelect:function(k,l){updateResults()}})}else{if(i.hasClass("filter-text-box")){i.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",onSelect:function(k,l){updateResults()}})}else{if((typeof j!=="undefined")&&(j!==false)){i.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",altField:j,altFormat:"yy-mm-dd"})}else{i.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy"})}}}});$(".filter-text-box").live("keypress",function(j){var i=j.keyCode||j.which;if(i==13){updateResults()}});$("#listing-filter input[type='checkbox']").live("click",function(){updateResults()});$(".action-update-your-results").live("click",function(){updateResults()});$(".action-clear-filters").live("click",function(){$("#ajax_loading").show();$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");if($(".filter-text-box").length>0){$(".filter-text-box").each(function(){$(this).val("")})}$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()});$(".action-show-hide-filter").live("click",function(){$("#listing-statistics").hide();if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}if($("#listing-filter").is(":hidden")){$("#listing-filter").show();if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-s")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-n")}if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-down")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-down").addClass("ui-icon-arrow-up")}}else{$("#listing-filter").hide();if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}}});$(".action-show-hide-statistics").live("click",function(){$("#listing-filter").hide();if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}if($("#listing-statistics").is(":hidden")){if($("#listing-statistics").html()!=""){$("#listing-statistics").show()}else{$("#listing-statistics-loading").show()}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-s")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-n")}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-down")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-down").addClass("ui-icon-arrow-up")}}else{$("#listing-statistics-loading").hide();$("#listing-statistics").hide();if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}}});$(".action-confirm-multiple-delete").live("click",function(i){i.preventDefault();if($("#confirm-multiple-delete")){if($("#form-save-required")){if($("#form-save-required").val()>0){$("#save-required-warning").show();$("html, body").animate({scrollTop:$("#save-required-warning").offset().top-20},"slow")}else{$("#confirm-multiple-delete").show();$("html, body").animate({scrollTop:$("#confirm-multiple-delete").offset().top-20},"slow")}}else{$("#confirm-multiple-delete").show();$("html, body").animate({scrollTop:$("#confirm-multiple-delete").offset().top-20},"slow")}}});$(".action-cancel-multiple-delete").live("click",function(){$("#form-delete").val("0");$("#confirm-multiple-delete").hide()});$(".action-multiple-delete").live("click",function(){$("#form-delete").val("1");$("#form-update").submit()});$(".action-add").live("click",function(i){if($("#add")){addFormRow();$("#add").show();$("html, body").animate({scrollTop:$("#add").offset().top-20},"slow")}});$(".action-new").live("click",function(i){if($("#new")){$("#new").show();$("html, body").animate({scrollTop:$("#new").offset().top-20},"slow")}});$(".action-close-add").live("click",function(i){$("div.form-error").hide();$("#add").hide();if($("#add .action-select-add:not(:eq(0))").length>0){$("#add .action-select-add:not(:eq(0))").each(function(){$(this).parent().parent().parent().parent().remove()})}$("html, body").animate({scrollTop:0},"slow")});$(".action-close-new").live("click",function(i){$("div.form-error").hide();$("#new").hide();$("#new")[0].reset();$("html, body").animate({scrollTop:0},"slow")});$("#button-add-another").live("click",function(){$("#form-add-another").val("1");return true});$("#button-add").live("click",function(){$("#form-add-another").val("0");return true});$("#button-update-go-back").live("click",function(){$("#form-go-back").val("1");return true});$("#button-update").live("click",function(){$("#form-go-back").val("0");return true});$("#add #button-listing-add-go-back").live("click",function(){$("#form-go-back").val("1");$("#form-update").submit();return true});$("#add #button-listing-add").live("click",function(){$("#form-go-back").val("0");$("#form-update").submit();return true});$("#new #button-listing-new").live("click",function(){$("#form-go-back").val("0");$("#form-new-item").val(1);$("#form-update").submit();return true});$("#add .action-add-another").live("click",function(){addFormRow()});$(".action-select-all").live("click",function(){var i="";if($(this).attr("data-select")){i="-"+$(this).attr("data-select")}if($(".action-select-all").is(":checked")){$(".action-select"+i+":not(:hidden)").attr("checked","checked");$(".action-select"+i+":not(:hidden)").parent().addClass("checked");$(".action-select"+i+":not(:hidden)").parent().parent().parent().parent().addClass("selected")}else{$(".action-select"+i+":not(:hidden)").attr("checked",false);$(".action-select"+i+":not(:hidden)").parent().removeClass("checked");$(".action-select"+i+":not(:hidden)").parent().parent().parent().parent().removeClass("selected")}});$(".action-select").live("click",function(){var i=$(this).attr("data-id");if($(this).is(":checked")){$("#item-"+i).addClass("selected")}else{$("#item-"+i).removeClass("selected")}if($(".action-select:not(:checked)").length<1){$(".action-select-all").attr("checked","checked");$(".action-select-all").parent().addClass("checked")}else{$(".action-select-all").attr("checked",false);$(".action-select-all").parent().removeClass("checked")}});$(".action-select-all-add").live("click",function(){if($(".action-select-all-add").is(":checked")){$(".action-select-add:not(.no-uniform)").attr("checked","checked");$(".action-select-add:not(.no-uniform)").parent().addClass("checked");$("tr.item-add").addClass("selected")}else{$(".action-select-add:not(.no-uniform)").attr("checked",false);$(".action-select-add:not(.no-uniform)").parent().removeClass("checked");$("tr.item-add").removeClass("selected")}});$(".action-select-add").live("click",function(){var i=$(this).attr("data-id");if($(this).is(":checked")){$("#item-"+i).addClass("selected")}else{$("#item-"+i).removeClass("selected")}if($(".action-select-add:not(:checked)").length<2){$(".action-select-all-add").attr("checked","checked");$(".action-select-all-add").parent().addClass("checked")}else{$(".action-select-all-add").attr("checked",false);$(".action-select-all-add").parent().removeClass("checked")}});$(".action-go-back").live("click",function(){window.history.back()});if(typeof $("ul.sf-menu").superfish==="function"){$("ul.sf-menu").supersubs({minWidth:15,maxWidth:27,extraWidth:1}).superfish()}$(".close-message").live("click",function(){$(".message").fadeOut()});if(typeof prettyPrint==="function"){prettyPrint();$(".prettyprint").after('<div class="clear"></div>').hover(function(){if($(this).css("width","auto").width()<$(this).parent().width()){$(this).css("width","100%")}},function(){})}if($(".display").length>0){$(".display").dataTable({bJQueryUI:true,bRetrieve:true,bDestroy:true,sPaginationType:"full_numbers"})}if($(".basic-display").length>0){$(".basic-display").dataTable({bJQueryUI:true,bSort:false,bPaginate:false,bFilter:false,bInfo:false,bRetrieve:true,bDestroy:true}).fnDraw()}initGlobalFunctions();$(".action-image-popup").live("click",function(){loadImagePopup($(this).attr("data-image-large-path"),$(this).attr("alt"),$(this).attr("data-image-size-width"),$(this).attr("data-image-size-height"))});$.fx.speeds._default=1000;$(".sidebar-tabs .ui-tabs-nav li a").click(function(){if($("#form-current-tab")){$("#form-current-tab").val($(this).attr("href").replace("#",""))}})});function resetGlobalFunctions(){initGlobalFunctions()}function initGlobalFunctions(){$(".button").each(function(){$(this).button({icons:{primary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-primary"):null,secondary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-secondary"):null},text:$(this).attr("data-icon-only")==="true"?false:true});var c=$(this).attr("data-notification");if(($(this).attr("data-notification")!="")&&($(this).attr("data-notification")!=undefined)){$(this).prepend('<div class="button-notification">'+$(this).attr("data-notification")+"</div>")}});$(":date").datepicker({dateFormat:"dd/mm/yy"});$(".accordion").accordion({autoHeight:false});$(".tabs").tabs({show:function(){checkFloatingButtons()}}).find("> .ui-tabs-nav").removeClass("ui-corner-all").addClass("ui-corner-top");$(".sidebar-tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix").find("li").removeClass("ui-corner-top").addClass("ui-corner-left").parents(".sidebar-tabs").find(".ui-tabs-nav").removeClass("ui-corner-all").addClass("ui-corner-left").parents(".sidebar-tabs").find(".ui-tabs-panel").removeClass("ui-corner-bottom").addClass("ui-corner-right");var a=[],b=$.cookie&&$.cookie("collapsedPortlets")?$.cookie("collapsedPortlets"):"";a=b.split(",");$(".portlet").each(function(){var d=$(this),e=d.attr("id"),c=$(this).hasClass("collapsible")&&a.includes(e);d.addClass("ui-widget ui-widget-content ui-corner-all"+(c?" collapsed":"")).find("> header:first").addClass("ui-widget-header ui-corner-top").parent().find("> section:last").addClass("ui-widget-content ui-corner-bottom").parent().filter(".collapsible").find("> header:first").append('<a href="#" class="portlet-collapse ui-corner-all" role="button"><span class="'+(c?"ui-icon ui-icon-circle-plus":"ui-icon ui-icon-circle-minus")+'">Expand/Collapse</span></a>').find(".portlet-collapse").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).click(function(){if(d.hasClass("collapsed")){$("span",this).removeClass("ui-icon-circle-plus").addClass("ui-icon-circle-minus");d.removeClass("collapsed").find("> section").css("display","none").slideDown(500,"easeOutExpo");if(a.includes(e)){a.remove(e);saveCollapsed(a)}}else{$("span",this).removeClass("ui-icon-circle-minus").addClass("ui-icon-circle-plus");$(this).parent().next().slideUp(500,"easeOutExpo",function(){d.addClass("collapsed");if(!a.includes(e)){a.push(e);saveCollapsed(a)}})}return false})});$("input[placeholder]").placeholder();$(".buttonset input").addClass("no-uniform");$(".buttonset").addClass("ui-corner-all").buttonset();$(":checkbox:not(.no-uniform), :radio:not(.no-uniform), select:not(.no-uniform), :file:not(.no-uniform)").uniform();$(":range").each(function(){var d=this,e={animate:true,value:$(this).val(),min:$(this).attr("min")?parseInt($(this).attr("min"),10):0,max:$(this).attr("max")?parseInt($(this).attr("max"),10):100,step:$(this).attr("step")?parseInt($(this).attr("step"),10):1,disabled:$(this).is(":disabled"),orientation:$(this).attr("data-orientation")==="vertical"?"vertical":"horizontal",range:$(this).attr("data-range")==="true"?true:($(this).attr("data-range") in {min:1,max:1}?$(this).attr("data-range"):false),values:$(this).attr("data-values")?$(this).attr("data-values").split(/,/):null,slide:function(g,f){$(d).val(f.value);if($(d).attr("data-values")){$(d).attr("data-values",f.values[0]+","+f.values[1])}$(d).change()}},c=$('<div class="slider"></div>').slider(e);$(this).before(c).hide()});$(".progress").each(function(){var c=parseInt($(this).attr("data-value"),10);$(this).progressbar({value:c}).filter("[data-show-value=true]").find("div").append("<b>"+c+"%</b>")});$(".message.closeable").prepend('<span class="message-close ui-icon ui-icon-circle-close"></span>').find(".message-close").click(function(){$(this).parent().fadeOut()});$("body").append('<div class="apple_overlay black" id="overlay"><iframe class="contentWrap" style="width: 100%; height: 500px"></iframe></div>');$("a.help[rel]").overlay({effect:"apple",onBeforeLoad:function(){var c=this.getOverlay().find(".contentWrap");c.attr("src",this.getTrigger().attr("href"))}});$("input.seo-url").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-//]/g,""));$(this).caret(c)});$("input.uppercase").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toUpperCase());$(this).caret(c)});$("input.postcode").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toUpperCase());$(this).caret(c)});$("input.lowercase").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toLowerCase());$(this).caret(c)});$("input.integer").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().replace(/[^0-9]/g,""));$(this).caret(c)});$("input.decimal").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().replace(/[^0-9.]/g,""));$(this).caret(c)});$("input.url").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-.?+=&://]/g,""));if($(this).val().substring(0,7)!="http://"){$(this).val("http://"+$(this).val())}$(this).caret(c)});$.tools.validator.fn("[type=time]","Please supply a valid time.",function(d,c){return(/^\d\d:\d\d$/).test(c)});$.tools.validator.fn("[data-equals]","The value you entered is not equal with the value entered in the $1 field.",function(d){var c=d.attr("data-equals"),e=this.getInputs().filter("[name="+c+"]");return d.val()===e.val()?true:[c]});$.tools.validator.fn("[minlength]",function(e,c){var d=e.attr("minlength");return c.length>=d?true:{en:"Please provide at least "+d+" character"+(d>1?"s":"")+"."}});$.tools.validator.localizeFn("[type=time]",{en:"Please supply a valid time."});$.tools.validator.localize("en",{":email":"The email address you have entered is not valid.",":number":"Please enter a number only.",":url":'Please enter a valid web address. The web address must start with "http://"',"[max]":"The value you enter must not be bigger than $1.","[min]":"The value you enter must not be less than $1.","[required]":"This field is required. Please enter a value."});$("form.has-validation").validator({position:"center right",offset:[0,-250],messageClass:"form-error",errorInputEvent:"blur",inputEvent:"keyup",message:"<div><em/></div>"}).attr("novalidate","novalidate").submit(function(c){if(!c.isDefaultPrevented()){if($("form.has-validation input.form-difference-check").length>0){$("form.has-validation input.form-difference-check").each(function(){if($(this).val()==$("#"+$(this).attr("data-object-to-check")).val()){$("#"+$(this).attr("data-object-to-check")).remove();$(this).remove()}})}$("#ajax_loading").show();return true}});$("#quick-search").focus(function(){$(this).parent().animate({width:"400px"},500,"easeOutExpo")}).blur(function(){var c=this;setTimeout(function(){if($(c)[0]!==document.activeElement){$(c).parent().animate({width:"200px"},500,"easeOutExpo")}},500)});$("fieldset.fieldset-buttons > legend").each(function(){$(this).css({marginLeft:(Math.round($(this).parent().width()/2)-Math.round($(this).width()/2))+"px"})});$(".main-content").resize(function(){(typeof $(".isotope").isotope==="function")&&$(".isotope").isotope();$("fieldset.fieldset-buttons > legend").each(function(){$(this).css({marginLeft:(Math.round($(this).parent().width()/2)-Math.round($(this).width()/2))+"px"})})});if($.cookie){if($.cookie("menuCollapsed")==="1"){$(".main-section > nav").addClass("collapsed").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>');$(".main-content").resize()}else{if($.cookie("menuCollapsed")==="0"){$(".main-section > nav").removeClass("collapsed").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-w"></span>');$(".main-content").resize()}else{if($(".main-section > nav").hasClass("collapsed")){$(".main-section > nav").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>')}else{$(".main-section > nav").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>')}}}}$(".main-section > nav a.chevron").click(function(){if($(this).parent().toggleClass("collapsed").hasClass("collapsed")){$("span",this).removeClass("ui-icon-circle-triangle-w").addClass("ui-icon-circle-triangle-e");$.cookie&&$.cookie("menuCollapsed","1",{expires:adminCookieExpiry,path:"/"})}else{$("span",this).removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-w");$.cookie&&$.cookie("menuCollapsed","0",{expires:adminCookieExpiry,path:"/"})}$(".main-content").resize();$.waypoints("refresh");if($("#float-buttons")){if($("#float-buttons .float-buttons").hasClass("float-buttons-sticky")){$("#float-buttons .float-buttons").hide();var c=setTimeout(function(){$("#float-buttons .float-buttons").show(0,function(){if($("#float-buttons").hasClass("padding-15")){$("#float-buttons .float-buttons").offset({left:($("#float-buttons").offset().left+15),top:($("#float-buttons .float-buttons").offset().top)})}else{$("#float-buttons .float-buttons").offset({left:($("#float-buttons").offset().left),top:($("#float-buttons .float-buttons").offset().top)})}})},800)}}return false});if($(sortableName).sortable){$(sortableName).sortable({cursor:"move",revert:500,opacity:0.7,appendTo:"body",handle:"header",items:"[draggable=true]",placeholder:"portlet-placeholder grid_2",forcePlaceholderSize:true,update:function(d,c){$.cookie&&$.cookie(sortableCookie,$(this).sortable("toArray"),{expires:adminCookieExpiry,path:"/"})}}).disableSelection()}$("textarea.tinymce-basic, textarea.tinymce-advanced").css("width","100%");$("textarea.tinymce-basic").css("height","100px");if($("textarea.tinymce-basic").length>0){$("textarea.tinymce-basic").tinymce({script_url:"/bundles/webilluminationadmin/js/tinymce/tiny_mce.js",theme:"advanced",plugins:"contextmenu,paste,fullscreen,xhtmlxtras,spellchecker",theme_advanced_buttons1:"bold,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,|,spellchecker",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_resizing:true,theme_advanced_path:false,content_css:"/bundles/webilluminationadmin/css/content.css"})}if($("textarea.tinymce-advanced").length>0){$("textarea.tinymce-advanced").tinymce({script_url:"/bundles/webilluminationadmin/js/tinymce/tiny_mce.js",theme:"advanced",plugins:"pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist,spellchecker",theme_advanced_buttons1:"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect,|,spellchecker",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",theme_advanced_buttons4:"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_resizing:true,theme_advanced_path:false,content_css:"/bundles/webilluminationadmin/css/content.css"})}$("input.show-tinymce").change(function(){if($(this).val()==="1"){$($(this).attr("rel")).tinymce().show()}else{$($(this).attr("rel")).tinymce().hide()}});$.cookie&&restoreOrder(sortableName,sortableCookie);$.cookie&&$.cookie("background")&&changeBackground($.cookie("background"));$.cookie&&$.cookie("css")&&changeUicolor($.cookie("css"))}function loadImagePopup(d,c,b,a){if(c==""){c="Detailed View"}$("#dialog-image-popup-image").attr("src",d).attr("alt",c).attr("width",b).attr("height",a);$("#dialog-image-popup").dialog({autoOpen:false,autoResize:true,width:"auto",height:"auto",modal:true,show:"fade",hide:"fade"}).parents(".ui-dialog").find(".ui-dialog-titlebar-close").after("<div/>");$("#ui-dialog-title-dialog-image-popup").html(c);$("#dialog-image-popup").dialog("open")}function restoreOrder(a,d){var h=$(a);if(!h){return}var f=$.cookie(d);if(!f){return}var l=f.split(","),c=h.sortable("toArray"),j=[];for(var b=0;b<c.length;b++){j[c[b]]=c[b]}for(var k=0,e=l.length;k<e;k++){var g=l[k];if(g in j){$(a).append($(a).children("#"+g))}}}function saveCollapsed(a){$.cookie&&$.cookie("collapsedPortlets",a,{expires:adminCookieExpiry,path:"/"})}function changeBackground(a){$("body").removeClass($.cookie("background")).addClass(a);$.cookie&&$.cookie("background",a,{expires:adminCookieExpiry,path:"/"})}function changeUicolor(a){$("link.uicolor").attr("href",a);$.cookie&&$.cookie("css",a,{expires:adminCookieExpiry,path:"/"})}$.easing.drop=function(h,g,a,f,e){return -f*(Math.sqrt(1-(g/=e)*g)-1)+a};$.tools.overlay.addEffect("drop",function(a,d){var b=this.getConf(),c=this.getOverlay();if(b.fixed){a.position="fixed"}else{a.top+=$(window).scrollTop();a.left+=$(window).scrollLeft();a.position="absolute"}c.css(a).show();c.animate({top:"+=55",opacity:1,width:"+=20"},400,"drop",d)},function(a){this.getOverlay().animate({top:"-=55",opacity:0,width:"-=20"},300,"drop",function(){$(this).hide();a.call()})});if(!Array.indexOf){Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++){if(this[b]===a){return b}}return -1}}Array.prototype.includes=function(a){for(var b=0;b<this.length;b++){if(this[b]===a){return true}}return false};Array.prototype.remove=function(a){var b=this.indexOf(a);if(b!==-1){this.splice(b,1)}};function ajaxFlashMessage(b,a){if(b=="success"){$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-success ui-corner-all"><p><span class="ui-icon ui-icon-circle-check"></span><strong>SUCCESS:</strong> '+a+"</p></div></div>")}else{if(b=="error"){$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-error ui-corner-all"><p><span class="ui-icon ui-icon-alert"></span><strong>ERROR:</strong> '+a+"</p></div></div>")}else{$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-highlight ui-corner-all"><p><span class="ui-icon ui-icon-info"></span><strong>NOTICE:</strong> '+a+"</p></div></div>")}}$(".message.closeable").prepend('<span class="message-close ui-icon ui-icon-circle-close"></span>').find(".message-close").click(function(){$(this).parent().fadeOut(function(){$(this).remove()})})};