(function(a){a.fn.hoverIntent=function(c,b){var l={sensitivity:7,interval:250,timeout:0};l=a.extend(l,b?{over:c,out:b}:c);var n,j,h,d;var i=function(f){n=f.pageX;j=f.pageY};var k=function(f,g){g.hoverIntent_t=clearTimeout(g.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-j))<l.sensitivity){a(g).unbind("mousemove",i);g.hoverIntent_s=1;return l.over.apply(g,[f])}else{h=n;d=j;g.hoverIntent_t=setTimeout(function(){k(f,g)},l.interval)}};var e=function(f,g){g.hoverIntent_t=clearTimeout(g.hoverIntent_t);g.hoverIntent_s=0;return l.out.apply(g,[f])};var m=function(g){var f=jQuery.extend({},g);var o=this;if(o.hoverIntent_t){o.hoverIntent_t=clearTimeout(o.hoverIntent_t)}if(g.type=="mouseenter"){h=f.pageX;d=f.pageY;a(o).bind("mousemove",i);if(o.hoverIntent_s!=1){o.hoverIntent_t=setTimeout(function(){k(f,o)},l.interval)}}else{a(o).unbind("mousemove",i);if(o.hoverIntent_s==1){o.hoverIntent_t=setTimeout(function(){e(f,o)},l.timeout)}}};return this.bind("mouseenter",m).bind("mouseleave",m)}})(jQuery);(function(u,n,y,w,q){var z=u(w),o="waypoint.reached",t=function(b,a){b.element.trigger(o,a);if(b.options.triggerOnce){b.element[n]("destroy")}},A=function(c,b){if(!b){return -1}var a=b.waypoints.length-1;while(a>=0&&b.waypoints[a].element[0]!==c[0]){a-=1}return a},p=[],v=function(a){u.extend(this,{element:u(a),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:u.proxy(function(){var b=this.element.scrollTop(),f=b>this.oldScroll,c=this,e=u.grep(this.waypoints,function(h,g){return f?(h.offset>c.oldScroll&&h.offset<=b):(h.offset<=c.oldScroll&&h.offset>b)}),d=e.length;if(!this.oldScroll||!b){u[y]("refresh")}this.oldScroll=b;if(!d){return}if(!f){e.reverse()}u.each(e,function(h,g){if(g.options.continuous||h===d-1){t(g,[f?"down":"up"])}})},this)});u(a).bind("scroll.waypoints",u.proxy(function(){if(!this.didScroll){this.didScroll=true;w.setTimeout(u.proxy(function(){this.doScroll();this.didScroll=false},this),u[y].settings.scrollThrottle)}},this)).bind("resize.waypoints",u.proxy(function(){if(!this.didResize){this.didResize=true;w.setTimeout(u.proxy(function(){u[y]("refresh");this.didResize=false},this),u[y].settings.resizeThrottle)}},this));z.load(u.proxy(function(){this.doScroll()},this))},x=function(a){var b=null;u.each(p,function(d,c){if(c.element[0]===a){b=c;return false}});return b},s={init:function(b,a){this.each(function(){var f=u.fn[n].defaults.context,c,e=u(this);if(a&&a.context){f=a.context}if(!u.isWindow(f)){f=e.closest(f)[0]}c=x(f);if(!c){c=new v(f);p.push(c)}var h=A(e,c),d=h<0?u.fn[n].defaults:c.waypoints[h].options,g=u.extend({},d,a);g.offset=g.offset==="bottom-in-view"?function(){var i=u.isWindow(f)?u[y]("viewportHeight"):u(f).height();return i-u(this).outerHeight()}:g.offset;if(h<0){c.waypoints.push({element:e,offset:null,options:g})}else{c.waypoints[h].options=g}if(b){e.bind(o,b)}if(a&&a.handler){e.bind(o,a.handler)}});u[y]("refresh");return this},remove:function(){return this.each(function(c,b){var a=u(b);u.each(p,function(f,e){var d=A(a,e);if(d>=0){e.waypoints.splice(d,1);if(!e.waypoints.length){e.element.unbind("scroll.waypoints resize.waypoints");p.splice(f,1)}}})})},destroy:function(){return this.unbind(o)[n]("remove")}},r={refresh:function(){u.each(p,function(f,c){var b=u.isWindow(c.element[0]),a=b?0:c.element.offset().top,e=b?u[y]("viewportHeight"):c.element.height(),d=b?0:c.element.scrollTop();u.each(c.waypoints,function(k,j){if(!j){return}var i=j.options.offset,h=j.offset;if(typeof j.options.offset==="function"){i=j.options.offset.apply(j.element)}else{if(typeof j.options.offset==="string"){var g=parseFloat(j.options.offset);i=j.options.offset.indexOf("%")?Math.ceil(e*(g/100)):g}}j.offset=j.element.offset().top-a+d-i;if(j.options.onlyOnScroll){return}if(h!==null&&c.oldScroll>h&&c.oldScroll<=j.offset){t(j,["up"])}else{if(h!==null&&c.oldScroll<h&&c.oldScroll>=j.offset){t(j,["down"])}else{if(!h&&c.element.scrollTop()>j.offset){t(j,["down"])}}}});c.waypoints.sort(function(h,g){return h.offset-g.offset})})},viewportHeight:function(){return(w.innerHeight?w.innerHeight:z.height())},aggregate:function(){var a=u();u.each(p,function(c,b){u.each(b.waypoints,function(d,e){a=a.add(e.element)})});return a}};u.fn[n]=function(a){if(s[a]){return s[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof a==="function"||!a){return s.init.apply(this,arguments)}else{if(typeof a==="object"){return s.init.apply(this,[null,a])}else{u.error("Method "+a+" does not exist on jQuery "+n)}}}};u.fn[n].defaults={continuous:true,offset:0,triggerOnce:false,context:w};u[y]=function(a){if(r[a]){return r[a].apply(this)}else{return r.aggregate()}};u[y].settings={resizeThrottle:200,scrollThrottle:100};z.load(function(){u[y]("refresh")})})(jQuery,"waypoint","waypoints",window);(function(a){a.caretTo=function(d,b){if(d.createTextRange){var c=d.createTextRange();c.move("character",b);c.select()}else{if(d.selectionStart!=null){d.focus();d.setSelectionRange(b,b)}}};a.caretPos=function(c){if("selection" in document){var b=c.createTextRange();try{b.setEndPoint("EndToStart",document.selection.createRange())}catch(d){return 0}return b.text.length}else{if(c.selectionStart!=null){return c.selectionStart}}};a.fn.caret=function(b,c){if(typeof(b)==="undefined"){return a.caretPos(this.get(0))}return this.queue(function(d){if(isNaN(b)){var e=a(this).val().indexOf(b);if(c===true){e+=b.length}else{if(typeof(c)!=="undefined"){e+=c}}a.caretTo(this,e)}else{a.caretTo(this,b)}d()})};a.fn.caretToStart=function(){return this.caret(0)};a.fn.caretToEnd=function(){return this.queue(function(b){a.caretTo(this,a(this).val().length);b()})}}(jQuery));var fixWidthHelper=function(b,a){a.children().each(function(){$(this).width($(this).width())});return a};(function(a){a.fn.placeholder=function(b){return this.each(function(){if(!("placeholder" in document.createElement(this.tagName.toLowerCase()))){var c=a(this),d=c.attr("placeholder");c.val(d).data("color",c.css("color")).css("color","#aaa");c.focus(function(){if(a.trim(c.val())===d){c.val("").css("color",c.data("color"))}}).blur(function(){if(!a.trim(c.val())){c.val(d).data("color",c.css("color")).css("color","#aaa")}})}})}}(jQuery));var menuYloc=null;var adminCookieExpiry=365;var sortableCookie="sortable-order";var sortableName=".sortable";function resetMessages(){$("#message-error, #message-notice, #message-success").slideUp()}function checkFloatingButtons(){if($("#float-buttons-content").length>0){$("#float-buttons-content").removeClass("float-buttons-sticky");var a=$("#float-buttons-content").offset().top+$("#float-buttons-content").outerHeight()-$(window).scrollTop();if(a>$(window).height()){$("#float-buttons-content").addClass("float-buttons-sticky")}else{$("#float-buttons-content").removeClass("float-buttons-sticky")}}}function checkMaximumCharcaters(e,c){if(e){var b=e.val();var d="";var a=0;if(b.length<=c){a=c-b.length;d="<strong>Max Characters:</strong> "+c+' (You have <strong class="green">'+a+"</strong> character";if(a!=1){d=d+"s"}d=d+" remaining)"}else{a=b.length-c;d="<strong>Max Characters:</strong> "+c+' (You have used <strong class="red">'+a+"</strong> character";if(a!=1){d=d+"s"}d=d+" too many)"}return d}return""}$(window).load(function(){$("#loading").fadeOut(function(){$(this).remove();$("body").removeAttr("style")});var a=0;if($("td.buttons-container:eq(0) .button").length>0){$("td.buttons-container:eq(0) .button").each(function(){a=a+$(this).outerWidth(true)})}if(a>0){$(".buttons-spacer").width(a).attr("width",a)}checkFloatingButtons();if($("#update-listing-filter-empty")&&$("#listing")){if($("#update-listing-filter-empty").val()<1){$("html, body").animate({scrollTop:$("#listing").offset().top-20},"slow")}}if($("#wrapper section.main-section nav ul li").length>0){var b=20;if($("#wrapper section.main-section nav ul li").length>0){$("#wrapper section.main-section nav ul li").each(function(){b=b+parseInt($(this).outerHeight(true))})}$("#wrapper section.main-section nav").css("min-height",b);$("#wrapper section.main-section div.main-content").css("min-height",$("#wrapper section.main-section nav").outerHeight(true))}$(".preview-list table tr:odd:not(.no-row-colour)").addClass("odd");$("table.data-table > tbody > tr:odd:not(.no-row-colour)").addClass("odd");if($(".sidebar-tabs").length>0){$(".sidebar-tabs").each(function(){var c=0;$(this).find("ul li").each(function(){c=c+parseInt($(this).outerHeight(true))});c=c-15;if(c>$(this).find("section").outerHeight(true)){$(this).find("section").height(c)}})}if($("a.auto-click").length>0){$("#ajax_loading").show();window.setTimeout(function(){$("a.auto-click")[0].click();$("#ajax_loading").hide()},5000)}$("div.selector > select.ui-corner-none").each(function(){$(this).parent().addClass("ui-corner-none").find("span").addClass("ui-corner-none")})});function resetFromValidation(){$(".has-validation").validator({position:"center right",offset:[0,-250],messageClass:"form-error",errorInputEvent:"blur",inputEvent:"keyup",message:"<div><em/></div>"}).attr("novalidate","novalidate")}function addFormRow(){$("#add input, #add textarea, #add select").removeClass("invalid");$(".form-error").remove();$(".action-select-add").attr("checked",false);$(".action-select-add").parent().removeClass("checked");$("tr.item-add").removeClass("selected");$("#data-add > tbody > tr:first").clone().appendTo("#data-add > tbody");$("#data-add > tbody > tr:last input, #data-add > tbody > tr:last textarea, #data-add > tbody > tr:last select").each(function(){$(this).removeClass("no-uniform");$(this).attr("id",$(this).attr("data-id")+"-"+$("#data-add > tbody > tr").length);$(this).attr("name",$(this).attr("data-name")+"["+$("#data-add > tbody > tr").length+"]")});$("#data-add > tbody > tr:last input[data-add-required='required'], #data-add > tbody > tr:last textarea[data-add-required='required'], #data-add > tbody > tr:last select[data-add-required='required']").removeAttr("data-add-required").attr("required","required");$("#data-add > tbody > tr:last :checkbox, #data-add > tbody > tr:last :radio, #data-add > tbody > tr:last select, #data-add > tbody > tr:last :file").uniform();$.uniform.update();resetFromValidation();$("#data-add > tbody > tr:last").removeClass("ui-helper-hidden");$("#data-add > tbody > tr:last").removeAttr("id");$("#data-add tr").removeClass("odd");$("#data-add tr:odd").addClass("odd")}function updateResults(){$("#ajax_loading").show();$("#update-listing-date-from").val($("#filter-date-from").val());$("#update-listing-date-from-formatted").val($("#filter-date-from-formatted").val());$("#update-listing-date-to").val($("#filter-date-to").val());$("#update-listing-date-to-formatted").val($("#filter-date-to-formatted").val());$(".filter-text-box").each(function(){$("#"+$(this).attr("data-update-object")).val($(this).val())});$("#listing-filter td.checkboxes").each(function(){$(this).find("input[type='checkbox']:eq(0)").each(function(){var a=new Array();$("#listing-filter input[type='checkbox'][data-update-object='"+$(this).attr("data-update-object")+"']").each(function(b){if($(this).is(":checked")){a[a.length]=$(this).attr("data-filter-value")}});if(a.length>0){$("#"+$(this).attr("data-update-object")).val("|"+a.join("|")+"|")}else{$("#"+$(this).attr("data-update-object")).val("")}})});$("#update-listing-current-page").val("1");$("#update-listing-filter-empty").val("0");$("#form-update-listing").submit()}function updateFlatSortableList(f){var b=$("#flat-sortable-list-"+f);var d=$("input.flat-sortable-list-values[data-flat-sortable-list-object='"+f+"']");var e=$("select.flat-sortable-list-parts[data-flat-sortable-list-object='"+f+"']");var c=$("input.free-text[data-flat-sortable-list-object='"+f+"']");var a=new Array();if(b.find("li").length>0){b.find("li").each(function(){if($(this).attr("data-value")){a[a.length]=$(this).attr("data-value")}});d.val(a.join("^"))}c.val("");c.attr("disabled","disabled");e.find("option:selected").removeAttr("selected");e.find("option:first").attr("selected","selected");e.parent().find("span:first").html(e.find("option:first").text())}$(document).ready(function(){$("#ajax_loading").hide();if($(".floating-buttons-toolbar")){$("body").css("padding-bottom",$(".floating-buttons-toolbar").outerHeight(true)+"px")}$("nav li").each(function(){var i=$(this).attr("data-notification");if(($(this).attr("data-notification")!="")&&($(this).attr("data-notification")!=undefined)){$(this).append('<div class="button-notification">'+$(this).attr("data-notification")+"</div>")}});$.waypoints.settings.scrollThrottle=20;if($("#float-buttons")){$("#float-buttons").waypoint(function(j,i){$("#float-buttons-content").toggleClass("float-buttons-sticky",i==="up")},{offset:function(){return $.waypoints("viewportHeight")-$(this).outerHeight()}})}$(".action-hide").live("click",function(){$("#"+$(this).attr("data-object-to-hide")).hide()});$(".form-element .info-message-icon, .form-element .info-message-icon-left, .form-element .info-message-icon-right").live("mouseenter",function(){var i=$(this).attr("data-help-container");$("#form-help-"+i).slideDown()});$(".form-help").live("mouseleave",function(){$(this).slideUp()});$("form:not(.has-validation)").submit(function(){$("#ajax_loading").show()});if($("#update-listing-pagination")){var c=parseInt($("#update-listing-pagination").val());if(c>5){var d=parseInt($("#update-listing-current-page").val());var h=1;var a=5;$("li.page-navigation").hide();$("li.page-navigation[data-page='"+d.toString()+"']").show();for(var g=1;g<6;g++){var f=d-g;var e=d+g;if($("li.page-navigation[data-page='"+f.toString()+"']").length>0){if(h<a){$("li.page-navigation[data-page='"+f.toString()+"']").show();h++}}if($("li.page-navigation[data-page='"+e.toString()+"']").length>0){if(h<a){$("li.page-navigation[data-page='"+e.toString()+"']").show();h++}}}}}$(".page-navigation").live("click",function(){$("#ajax_loading").show();$("#update-listing-current-page").val(parseInt($(this).attr("data-page")));$("#form-update-listing").submit()});$("#listing-sort-order").live("change",function(){$("#ajax_loading").show();$("#update-listing-sort-order").val($(this).val());$("#update-listing-current-page").val("1");$("#form-update-listing").submit()});$("#listing-max-results").live("change",function(){$("#ajax_loading").show();$("#update-listing-max-results").val(parseInt($(this).val()));$("#update-listing-current-page").val("1");$("#form-update-listing").submit()});$("select.filter-listing").live("change",function(){$("#ajax_loading").show();var n=$(this).attr("data-listing-object");var m=$("#listing-"+n);var i=$(this).attr("data-listing-title");var j=$("#listing-title-"+n);var l=$(this).attr("data-filter");var k=$(this).val();m.find("tbody:eq(0) > tr").each(function(){var q=$(this);q.show();var o=false;var p=false;if(k){if(q.attr("data-"+l)!=k){o=true}}if(!o){if(m.find(".quick-filter:eq(0)").length>0){var r=m.find(".quick-filter:eq(0)").val();$(this).find(".filterable").each(function(){$searchValue=$(this).html();if($searchValue.toLowerCase().indexOf(r.toLowerCase())>-1){p=true}})}else{p=true}}if(!p){$(this).hide()}});if(i&&j){j.html(i+" ("+m.find("tbody:eq(0) > tr:visible").length+")")}$(".action-select-all").attr("checked",false);$(".action-select-all").parent().removeClass("checked");$("table.data-table > tbody:eq(0) > tr").removeClass("odd");$("table.data-table > tbody:eq(0) > tr:visible:odd").addClass("odd");if($("#wrapper section.main-section nav").outerHeight(true)>$("#wrapper section.main-section div.main-content").outerHeight(true)){$("#wrapper section.main-section div.main-content").css("min-height",$("#wrapper section.main-section nav").outerHeight(true))}else{$("#wrapper section.main-section div.main-content").css("min-height","")}checkFloatingButtons();$("#ajax_loading").hide()});$("select.quick-link").live("change",function(i){window.location=$(this).val()});$(".quick-filter").live("keypress",function(k){var j=k.keyCode||k.which;if(j==13){$("#ajax_loading").show();k.preventDefault();var o=$(this).attr("data-listing-object");var n=$("#listing-"+o);var i=$(this).attr("data-listing-title");var l=$("#listing-title-"+$(this).attr("data-listing-object"));var m=$(this).val();n.find("tbody:eq(0) > tr").each(function(){var r=$(this);r.show();var p=false;var q=false;$("select.filter-listing").each(function(){if(o==$(this).attr("data-listing-object")){if($(this).val()){if(r.attr("data-"+$(this).attr("data-filter"))!=$(this).val()){p=true}}}});if(!p){$(this).find(".filterable").each(function(){$searchValue=$(this).html();if($searchValue.toLowerCase().indexOf(m.toLowerCase())>-1){q=true}})}if(!q){$(this).hide()}});if(i&&l){l.html(i+" ("+n.find("tbody:eq(0) > tr:visible").length+")")}$(".action-select-all").attr("checked",false);$(".action-select-all").parent().removeClass("checked");$("table.data-table > tbody:eq(0) > tr").removeClass("odd");$("table.data-table > tbody:eq(0) > tr:visible:odd").addClass("odd");if($("#wrapper section.main-section nav").outerHeight(true)>$("#wrapper section.main-section div.main-content").outerHeight(true)){$("#wrapper section.main-section div.main-content").css("min-height",$("#wrapper section.main-section nav").outerHeight(true))}else{$("#wrapper section.main-section div.main-content").css("min-height","")}checkFloatingButtons();$("#ajax_loading").hide();return false}return true});$(".action-increase-quantity").live("click",function(){var j=$("#"+$(this).attr("data-quantity-object"));var i=parseInt(j.val())+1;j.val(i)});$(".action-decrease-quantity").live("click",function(){var j=$("#"+$(this).attr("data-quantity-object"));var i=parseInt(j.val())-1;if(i<1){i=1}j.val(i)});$("button.apply-to-all").live("click",function(){$("select.apply-to-all").each(function(){if($(this).val()!=""){var l=$("#listing-"+$(this).attr("data-listing-object"));var k=$(this).attr("data-item-class");var j=$(this).val();var i=$(this).find("option[value='"+j+"']").text();l.find("select."+k).each(function(){$(this).val(j);$(this).find("option").removeAttr("selected");$(this).find("option[value='"+j+"']").attr("selected","selected");$(this).prev().html(i);$(this).change()})}})});$(".action-quick-search").live("click",function(){$("#ajax_loading").show();if($("#form-quick-search").val()){$("#update-listing-current-page").val("1");$("#update-listing-search").val($("#form-quick-search").val());$("#form-update-listing").submit()}else{$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");$(".filter-text-box").each(function(){$(this).val("")});$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()}});$(".action-clear-quick-search").live("click",function(){$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");$(".filter-text-box").each(function(){$(this).val("")});$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()});$("#form-quick-search").live("keypress",function(j){var i=j.keyCode||j.which;if(i==13){$("#ajax_loading").show();if($("#form-quick-search").val()){$("#update-listing-current-page").val("1");$("#update-listing-search").val($("#form-quick-search").val());$("#form-update-listing").submit()}else{$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");$(".filter-text-box").each(function(){$(this).val("")});$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()}}});$("a.extra-action, button.extra-action").live("click",function(){$("#ajax_loading").show();var j=$(this).attr("data-form-action");if(j!=""){$("#form-update").attr("action",j)}var i=$(this).attr("data-form-target");if(i!=""){$("#form-update").attr("target",i)}$("#form-extra-action").val($(this).attr("data-extra-action"));$("#form-update").submit()});$("select.extra-action").live("change",function(){$("#ajax_loading").show();var k=$(this).find("option[value='"+$(this).val()+"']");var j=k.attr("data-form-action");if(j!=""){$("#form-update").attr("action",j)}var i=k.attr("data-form-target");if(i!=""){$("#form-update").attr("target",i)}$("#form-extra-action").val($(this).val());$(this).find("option").removeAttr("selected");$(this).prev().html($(this).find("option[value='']").text());$(this).find("option:eq(0)").attr("selected","selected");$("#form-update").submit()});$(".maximum-characters").each(function(){var k=$(this);var i=$(this).attr("data-maximum-characters");var j=$("#"+$(this).attr("data-maximum-characters-object"));j.html(checkMaximumCharcaters(k,i))});$(".maximum-characters").live("keyup",function(){var k=$(this);var i=$(this).attr("data-maximum-characters");var j=$("#"+$(this).attr("data-maximum-characters-object"));j.html(checkMaximumCharcaters(k,i))});$("#form-update table.data-table td input, #form-update table.data-table td textarea, #form-update table.data-table td select").live("change",function(){if(!$(this).hasClass("action-select")){var i=$(this).attr("data-id");$("tr#item-"+i).addClass("selected");$("tr#item-"+i+" td.select input.action-select").attr("checked","checked");$("tr#item-"+i+" td.select div.checker span").addClass("checked")}});$("#form-update table.data-table td .action-increase-quantity, #form-update table.data-table td .action-decrease-quantity, #form-update table.data-table td :checkbox, #form-update table.data-table td :radio, #form-update table.data-table td :file").live("click",function(){if(!$(this).hasClass("action-select")){var i=$(this).attr("data-id");$("tr#item-"+i).addClass("selected");$("tr#item-"+i+" td.select input.action-select").attr("checked","checked");$("tr#item-"+i+" td.select div.checker span").addClass("checked")}});$("#form-update table.data-table td input").live("keypress",function(j){var i=j.keyCode||j.which;if(i==13){j.preventDefault()}});$(".flat-sortable-list img").live("mousedown",function(i){i.preventDefault();return false});$(".flat-sortable-list ul").sortable({helper:fixWidthHelper,update:function(i,j){updateFlatSortableList(j.item.attr("data-flat-sortable-list-object"))}}).disableSelection();$("input.free-text").live("keypress",function(j){var k=$(this).attr("data-flat-sortable-list-object");var i=j.keyCode||j.which;if(i==13){j.preventDefault();$("button.action-add-flat-sortable-list-item[data-flat-sortable-list-object='"+k+"']").click()}});$(".action-delete-flat-sortable-list-item").live("click",function(){var i=$(this).parent().attr("data-flat-sortable-list-object");$(this).parent().remove();updateFlatSortableList(i)});$(".flat-sortable-list-parts").live("change",function(){var i=$("input.free-text[data-flat-sortable-list-object='"+$(this).attr("data-flat-sortable-list-object")+"']");if($(this).val()=="freeText"){i.removeAttr("disabled");if($(this).find("option:selected").text()!="Free Text"){i.val($(this).find("option:selected").text())}i.focus()}else{i.val("");i.attr("disabled","disabled")}});$(".action-add-flat-sortable-list-item").live("click",function(){var o=$(this).attr("data-flat-sortable-list-object");var i=o.replace("-template","");var l=$("#flat-sortable-list-"+o);var n=$("select.flat-sortable-list-parts[data-flat-sortable-list-object='"+o+"']");var m=$("input.free-text[data-flat-sortable-list-object='"+o+"']");var k=l.find("li").length+1;if(n.val()!=""){var j="";if((n.val()=="freeText")&&(m.val()!="")){j='<li data-flat-sortable-list-object="'+o+'" id="flat-sortable-list-'+i+"-item-"+k+'" data-value="freeText|'+m.val()+'">Free Text: "'+m.val()+'"<a class="action-delete-flat-sortable-list-item button ui-button-red ui-corner-right icon-set-white" data-icon-primary="ui-icon-circle-cross" data-icon-only="true">Delete</a></li>'}else{if(n.val()!="freeText"){j='<li data-flat-sortable-list-object="'+o+'" id="flat-sortable-list-'+i+"-item-"+k+'" data-value="'+n.val()+'">'+n.find("option[value='"+n.val()+"']").text()+'<a class="action-delete-flat-sortable-list-item button ui-button-red ui-corner-right icon-set-white" data-icon-primary="ui-icon-circle-cross" data-icon-only="true">Delete</a></li>'}}if(j!=""){l.append(j);if($("#flat-sortable-list-"+i+"-item-"+k+" .button").length>0){$("#flat-sortable-list-"+i+"-item-"+k+" .button").each(function(){$(this).button({icons:{primary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-primary"):null,secondary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-secondary"):null},text:$(this).attr("data-icon-only")==="true"?false:true})})}updateFlatSortableList(o)}}});$("#add .action-multiple-delete-add").live("click",function(){if($("#add .action-select-add:checked").length>0){$("#add .action-select-add:checked").each(function(){$(this).parent().parent().parent().parent().remove()})}if($("#data-add tbody tr").length<2){addFormRow()}$(".action-select-all-add").attr("checked",false);$(".action-select-all-add").parent().removeClass("checked");$("#data-add tr").removeClass("odd");$("#data-add tr:odd").addClass("odd")});var b=function(j,i){i.children().each(function(){$(this).width($(this).width())});return i};$("table.sortable tbody").sortable({helper:b,update:function(j,k){$("#ajax_loading").show();var i=0;var l=0;if($("table.sortable tbody tr").length>0){$("table.sortable tbody tr").each(function(){var m=$(this).find(".listing-display-order");if(m.val()!=i){$(this).removeClass("selected").addClass("selected");$(this).find("td.select div.checker span").removeClass("checked").addClass("checked");$(this).find("td.select div.checker span input").attr("checked","checked");l=1}m.val(i);i++})}if($("#form-save-required")){$("#form-save-required").val(l)}$("table.sortable tbody tr").removeClass("odd");$("table.sortable tbody tr:odd").addClass("odd");$("#ajax_loading").hide()}}).disableSelection();$(".update-filter").live("click",function(){$("#ajax_loading").show();$("#form-update-listing input[type='hidden']").val("");$("#"+$(this).attr("data-update-object")).val("|"+$(this).attr("data-filter-value")+"|");$("#update-listing-sort-order").val($("#listing-sort-order").val());$("#update-listing-max-results").val(parseInt($("#listing-max-results").val()));$("#update-listing-current-page").val("1");$("#update-listing-filter-empty").val("1");$("#form-update-listing").submit()});$(".tooltip-preview-left, .tooltip-preview-right").hoverIntent(function(){$(".tooltip").hide();var j=$(this);var o=parseInt($(".main-section").outerWidth(true));var k=j.position();var n=j.outerWidth(true);var m=j.outerHeight(true);var l=o-350;var i=$(j.attr("data-tooltip-id"));if((j.attr("data-ajax-path")!="")&&(j.attr("data-ajax-path")!=undefined)){if(i.find(".tooltip-content").html()==""){$.ajax({type:"GET",url:j.attr("data-ajax-path"),beforeSend:function(){$("#ajax_loading").show()},data:{id:j.attr("data-id")},error:function(){$("#ajax_loading").hide()},success:function(p){i.find(".tooltip-content").html(p);i.css({position:"absolute",visibility:"hidden",display:"block"});$tooltipHeight=i.outerHeight(true);$tooltipWidth=i.outerWidth(true);if($tooltipWidth>l){$tooltipWidth=l}i.css({position:"",visibility:"",display:""});$tooltipTop=parseInt(k.top-(($tooltipHeight-m)/2));if(($("#listing").offset().top+$tooltipTop)<($(window).scrollTop()+10)){$tooltipTop=$tooltipTop+(($(window).scrollTop()+10)-($("#listing").offset().top+$tooltipTop))}else{if(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)>($(window).outerHeight(true)+$(window).scrollTop())){$tooltipTop=$tooltipTop-(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)-($(window).outerHeight(true)+$(window).scrollTop()))}}if(j.hasClass("tooltip-preview-left")){$tooltipLeft=parseInt(k.left+n+6)}else{$tooltipLeft=parseInt(k.left-$tooltipWidth-26)}i.css({width:$tooltipWidth,top:$tooltipTop,left:$tooltipLeft});i.show();$("#ajax_loading").hide()}})}else{i.show()}}else{i.css({position:"absolute",visibility:"hidden",display:"block"});$tooltipHeight=i.outerHeight(true);$tooltipWidth=i.outerWidth(true);if($tooltipWidth>l){$tooltipWidth=l}i.css({position:"",visibility:"",display:""});$tooltipTop=parseInt(k.top-(($tooltipHeight-m)/2));if(($("#listing").offset().top+$tooltipTop)<($(window).scrollTop()+10)){$tooltipTop=$tooltipTop+(($(window).scrollTop()+10)-($("#listing").offset().top+$tooltipTop))}else{if(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)>($(window).outerHeight(true)+$(window).scrollTop())){$tooltipTop=$tooltipTop-(($("#listing").offset().top+$tooltipTop+$tooltipHeight+10)-($(window).outerHeight(true)+$(window).scrollTop()))}}if(j.hasClass("tooltip-preview-left")){$tooltipLeft=parseInt(k.left+n+6)}else{$tooltipLeft=parseInt(k.left-$tooltipWidth-26)}i.css({width:$tooltipWidth,top:$tooltipTop,left:$tooltipLeft});i.show()}},function(){$(".tooltip").hide()});$(".range-slider").each(function(){var o=$(this);var n=parseInt(o.attr("data-min"));if(n<1){n=1}var k=parseInt(o.attr("data-from-value"));if(k<1){k=n}var i=parseInt(o.attr("data-max"));if(i<1){i=10000}var j=parseInt(o.attr("data-to-value"));if(j<1){j=i}var m=$(o.attr("data-from-object"));var l=$(o.attr("data-to-object"));if(m&&l&&(o.hasClass("filter"))){o.slider({range:true,min:n,max:i,values:[k,j],slide:function(p,q){m.val(q.values[0]);l.val(q.values[1])},change:function(p,q){updateResults()}})}else{if(o.hasClass("filter")){o.slider({range:true,min:n,max:i,values:[k,j],change:function(p,q){updateResults()}})}else{if(m&&l){o.slider({range:true,min:n,max:i,values:[k,j],slide:function(p,q){m.val(q.values[0]);l.val(q.values[1])}})}else{o.slider({range:true,min:n,max:i,values:[k,j]})}}}});$(".date-picker").each(function(){var j=$(this);var i=$(this).attr("data-alt-field");if((typeof i!=="undefined")&&(i!==false)&&(j.hasClass("filter-text-box"))){j.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",altField:i,altFormat:"yy-mm-dd",onSelect:function(l,k){updateResults()}})}else{if(j.hasClass("filter-text-box")){j.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",onSelect:function(l,k){updateResults()}})}else{if((typeof i!=="undefined")&&(i!==false)){j.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",altField:i,altFormat:"yy-mm-dd"})}else{j.datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy"})}}}});$(".filter-text-box").live("keypress",function(j){var i=j.keyCode||j.which;if(i==13){updateResults()}});$("#listing-filter input[type='checkbox']").live("click",function(){updateResults()});$(".action-update-your-results").live("click",function(){updateResults()});$(".action-clear-filters").live("click",function(){$("#ajax_loading").show();$("#update-listing-search").val("");$("#filter-date-from").val("");$("#filter-date-from-formatted").val("");$("#filter-date-to").val("");$("#filter-date-to-formatted").val("");if($(".filter-text-box").length>0){$(".filter-text-box").each(function(){$(this).val("")})}$("#listing-filter input[type='checkbox']").removeAttr("checked").parent().removeClass("checked");updateResults()});$(".action-show-hide-filter").live("click",function(){$("#listing-statistics").hide();if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}if($("#listing-filter").is(":hidden")){$("#listing-filter").show();if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-s")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-n")}if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-down")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-down").addClass("ui-icon-arrow-up")}}else{$("#listing-filter").hide();if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}}});$(".action-show-hide-statistics").live("click",function(){$("#listing-filter").hide();if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#filter-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#filter-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}if($("#listing-statistics").is(":hidden")){if($("#listing-statistics").html()!=""){$("#listing-statistics").show()}else{$("#listing-statistics-loading").show()}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-s")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-n")}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-down")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-down").addClass("ui-icon-arrow-up")}}else{$("#listing-statistics-loading").hide();$("#listing-statistics").hide();if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-triangle-1-n")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s")}if($("#statistics-button > span.ui-button-icon-primary").hasClass("ui-icon-arrow-up")){$("#statistics-button > span.ui-button-icon-primary").removeClass("ui-icon-arrow-up").addClass("ui-icon-arrow-down")}}});$(".action-confirm-multiple-delete").live("click",function(i){i.preventDefault();if($("#confirm-multiple-delete")){if($("#form-save-required")){if($("#form-save-required").val()>0){$("#save-required-warning").show();$("html, body").animate({scrollTop:$("#save-required-warning").offset().top-20},"slow")}else{$("#confirm-multiple-delete").show();$("html, body").animate({scrollTop:$("#confirm-multiple-delete").offset().top-20},"slow")}}else{$("#confirm-multiple-delete").show();$("html, body").animate({scrollTop:$("#confirm-multiple-delete").offset().top-20},"slow")}}});$(".action-cancel-multiple-delete").live("click",function(){$("#form-delete").val("0");$("#confirm-multiple-delete").hide()});$(".action-multiple-delete").live("click",function(){$("#form-delete").val("1");$("#form-update").submit()});$(".action-add").live("click",function(i){if($("#add")){addFormRow();$("#add").show();$("html, body").animate({scrollTop:$("#add").offset().top-20},"slow")}});$(".action-new").live("click",function(i){if($("#new")){$("#new").show();$("html, body").animate({scrollTop:$("#new").offset().top-20},"slow")}});$(".action-close-add").live("click",function(i){$("div.form-error").hide();$("#add").hide();if($("#add .action-select-add:not(:eq(0))").length>0){$("#add .action-select-add:not(:eq(0))").each(function(){$(this).parent().parent().parent().parent().remove()})}$("html, body").animate({scrollTop:0},"slow")});$(".action-close-new").live("click",function(i){$("div.form-error").hide();$("#new").hide();$("#new")[0].reset();$("html, body").animate({scrollTop:0},"slow")});$("#button-add-another").live("click",function(){$("#form-add-another").val("1");return true});$("#button-add").live("click",function(){$("#form-add-another").val("0");return true});$("#button-update-go-back").live("click",function(){$("#form-go-back").val("1");return true});$("#button-update").live("click",function(){$("#form-go-back").val("0");return true});$("#add #button-listing-add-go-back").live("click",function(){$("#form-go-back").val("1");$("#form-update").submit();return true});$("#add #button-listing-add").live("click",function(){$("#form-go-back").val("0");$("#form-update").submit();return true});$("#new #button-listing-new").live("click",function(){$("#form-go-back").val("0");$("#form-new-item").val(1);$("#form-update").submit();return true});$("#add .action-add-another").live("click",function(){addFormRow()});$(".action-select-all").live("click",function(){var i="";if($(this).attr("data-select")){i="-"+$(this).attr("data-select")}if($(".action-select-all").is(":checked")){$(".action-select"+i+":not(:hidden)").attr("checked","checked");$(".action-select"+i+":not(:hidden)").parent().addClass("checked");$(".action-select"+i+":not(:hidden)").parent().parent().parent().parent().addClass("selected")}else{$(".action-select"+i+":not(:hidden)").attr("checked",false);$(".action-select"+i+":not(:hidden)").parent().removeClass("checked");$(".action-select"+i+":not(:hidden)").parent().parent().parent().parent().removeClass("selected")}});$(".action-select").live("click",function(){var i=$(this).attr("data-id");if($(this).is(":checked")){$("#item-"+i).addClass("selected")}else{$("#item-"+i).removeClass("selected")}if($(".action-select:not(:checked)").length<1){$(".action-select-all").attr("checked","checked");$(".action-select-all").parent().addClass("checked")}else{$(".action-select-all").attr("checked",false);$(".action-select-all").parent().removeClass("checked")}});$(".action-select-all-add").live("click",function(){if($(".action-select-all-add").is(":checked")){$(".action-select-add:not(.no-uniform)").attr("checked","checked");$(".action-select-add:not(.no-uniform)").parent().addClass("checked");$("tr.item-add").addClass("selected")}else{$(".action-select-add:not(.no-uniform)").attr("checked",false);$(".action-select-add:not(.no-uniform)").parent().removeClass("checked");$("tr.item-add").removeClass("selected")}});$(".action-select-add").live("click",function(){var i=$(this).attr("data-id");if($(this).is(":checked")){$("#item-"+i).addClass("selected")}else{$("#item-"+i).removeClass("selected")}if($(".action-select-add:not(:checked)").length<2){$(".action-select-all-add").attr("checked","checked");$(".action-select-all-add").parent().addClass("checked")}else{$(".action-select-all-add").attr("checked",false);$(".action-select-all-add").parent().removeClass("checked")}});$(".action-go-back").live("click",function(){window.history.back()});if(typeof $("ul.sf-menu").superfish==="function"){$("ul.sf-menu").supersubs({minWidth:15,maxWidth:27,extraWidth:1}).superfish()}$(".close-message").live("click",function(){$(".message").fadeOut()});if(typeof prettyPrint==="function"){prettyPrint();$(".prettyprint").after('<div class="clear"></div>').hover(function(){if($(this).css("width","auto").width()<$(this).parent().width()){$(this).css("width","100%")}},function(){})}if($(".display").length>0){$(".display").dataTable({bJQueryUI:true,bRetrieve:true,bDestroy:true,sPaginationType:"full_numbers"})}if($(".basic-display").length>0){$(".basic-display").dataTable({bJQueryUI:true,bSort:false,bPaginate:false,bFilter:false,bInfo:false,bRetrieve:true,bDestroy:true}).fnDraw()}initGlobalFunctions();$(".action-image-popup").live("click",function(){loadImagePopup($(this).attr("data-image-large-path"),$(this).attr("alt"),$(this).attr("data-image-size-width"),$(this).attr("data-image-size-height"))});$.fx.speeds._default=1000;$(".sidebar-tabs .ui-tabs-nav li a").click(function(){if($("#form-current-tab")){$("#form-current-tab").val($(this).attr("href").replace("#",""))}})});function resetGlobalFunctions(){initGlobalFunctions()}function initGlobalFunctions(){$(".button").each(function(){$(this).button({icons:{primary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-primary"):null,secondary:$(this).attr("data-icon-primary")?$(this).attr("data-icon-secondary"):null},text:$(this).attr("data-icon-only")==="true"?false:true});var c=$(this).attr("data-notification");if(($(this).attr("data-notification")!="")&&($(this).attr("data-notification")!=undefined)){$(this).prepend('<div class="button-notification">'+$(this).attr("data-notification")+"</div>")}});$(":date").datepicker({dateFormat:"dd/mm/yy"});$(".accordion").accordion({autoHeight:false});$(".tabs").tabs({show:function(){checkFloatingButtons()}}).find("> .ui-tabs-nav").removeClass("ui-corner-all").addClass("ui-corner-top");$(".sidebar-tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix").find("li").removeClass("ui-corner-top").addClass("ui-corner-left").parents(".sidebar-tabs").find(".ui-tabs-nav").removeClass("ui-corner-all").addClass("ui-corner-left").parents(".sidebar-tabs").find(".ui-tabs-panel").removeClass("ui-corner-bottom").addClass("ui-corner-right");var a=[],b=$.cookie&&$.cookie("collapsedPortlets")?$.cookie("collapsedPortlets"):"";a=b.split(",");$(".portlet").each(function(){var d=$(this),e=d.attr("id"),c=$(this).hasClass("collapsible")&&a.includes(e);d.addClass("ui-widget ui-widget-content ui-corner-all"+(c?" collapsed":"")).find("> header:first").addClass("ui-widget-header ui-corner-top").parent().find("> section:last").addClass("ui-widget-content ui-corner-bottom").parent().filter(".collapsible").find("> header:first").append('<a href="#" class="portlet-collapse ui-corner-all" role="button"><span class="'+(c?"ui-icon ui-icon-circle-plus":"ui-icon ui-icon-circle-minus")+'">Expand/Collapse</span></a>').find(".portlet-collapse").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).click(function(){if(d.hasClass("collapsed")){$("span",this).removeClass("ui-icon-circle-plus").addClass("ui-icon-circle-minus");d.removeClass("collapsed").find("> section").css("display","none").slideDown(500,"easeOutExpo");if(a.includes(e)){a.remove(e);saveCollapsed(a)}}else{$("span",this).removeClass("ui-icon-circle-minus").addClass("ui-icon-circle-plus");$(this).parent().next().slideUp(500,"easeOutExpo",function(){d.addClass("collapsed");if(!a.includes(e)){a.push(e);saveCollapsed(a)}})}return false})});$("input[placeholder]").placeholder();$(".buttonset input").addClass("no-uniform");$(".buttonset").addClass("ui-corner-all").buttonset();$(":checkbox:not(.no-uniform), :radio:not(.no-uniform), select:not(.no-uniform), :file:not(.no-uniform)").uniform();$(":range").each(function(){var e=this,d={animate:true,value:$(this).val(),min:$(this).attr("min")?parseInt($(this).attr("min"),10):0,max:$(this).attr("max")?parseInt($(this).attr("max"),10):100,step:$(this).attr("step")?parseInt($(this).attr("step"),10):1,disabled:$(this).is(":disabled"),orientation:$(this).attr("data-orientation")==="vertical"?"vertical":"horizontal",range:$(this).attr("data-range")==="true"?true:($(this).attr("data-range") in {min:1,max:1}?$(this).attr("data-range"):false),values:$(this).attr("data-values")?$(this).attr("data-values").split(/,/):null,slide:function(f,g){$(e).val(g.value);if($(e).attr("data-values")){$(e).attr("data-values",g.values[0]+","+g.values[1])}$(e).change()}},c=$('<div class="slider"></div>').slider(d);$(this).before(c).hide()});$(".progress").each(function(){var c=parseInt($(this).attr("data-value"),10);$(this).progressbar({value:c}).filter("[data-show-value=true]").find("div").append("<b>"+c+"%</b>")});$(".message.closeable").prepend('<span class="message-close ui-icon ui-icon-circle-close"></span>').find(".message-close").click(function(){$(this).parent().fadeOut()});$("body").append('<div class="apple_overlay black" id="overlay"><iframe class="contentWrap" style="width: 100%; height: 500px"></iframe></div>');$("a.help[rel]").overlay({effect:"apple",onBeforeLoad:function(){var c=this.getOverlay().find(".contentWrap");c.attr("src",this.getTrigger().attr("href"))}});$("input.seo-url").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-//]/g,""));$(this).caret(c)});$("input.uppercase").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toUpperCase());$(this).caret(c)});$("input.postcode").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toUpperCase());$(this).caret(c)});$("input.lowercase").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toLowerCase());$(this).caret(c)});$("input.integer").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().replace(/[^0-9]/g,""));$(this).caret(c)});$("input.decimal").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().replace(/[^0-9.]/g,""));$(this).caret(c)});$("input.url").live("keypress keyup focus",function(){var c=$(this).caret();$(this).val($(this).val().toLowerCase());$(this).val($(this).val().replace(/[ ]/g,"-"));$(this).val($(this).val().replace(/[^a-z0-9-.?+=&://]/g,""));if($(this).val().substring(0,7)!="http://"){$(this).val("http://"+$(this).val())}$(this).caret(c)});$.tools.validator.fn("[type=time]","Please supply a valid time.",function(c,d){return(/^\d\d:\d\d$/).test(d)});$.tools.validator.fn("[data-equals]","The value you entered is not equal with the value entered in the $1 field.",function(c){var e=c.attr("data-equals"),d=this.getInputs().filter("[name="+e+"]");return c.val()===d.val()?true:[e]});$.tools.validator.fn("[minlength]",function(c,d){var e=c.attr("minlength");return d.length>=e?true:{en:"Please provide at least "+e+" character"+(e>1?"s":"")+"."}});$.tools.validator.localizeFn("[type=time]",{en:"Please supply a valid time."});$.tools.validator.localize("en",{":email":"The email address you have entered is not valid.",":number":"Please enter a number only.",":url":'Please enter a valid web address. The web address must start with "http://"',"[max]":"The value you enter must not be bigger than $1.","[min]":"The value you enter must not be less than $1.","[required]":"This field is required. Please enter a value."});$("form.has-validation").validator({position:"center right",offset:[0,-250],messageClass:"form-error",errorInputEvent:"blur",inputEvent:"keyup",message:"<div><em/></div>"}).attr("novalidate","novalidate").submit(function(c){if(!c.isDefaultPrevented()){if($("form.has-validation input.form-difference-check").length>0){$("form.has-validation input.form-difference-check").each(function(){if($(this).val()==$("#"+$(this).attr("data-object-to-check")).val()){$("#"+$(this).attr("data-object-to-check")).remove();$(this).remove()}})}$("#ajax_loading").show();return true}});$("#quick-search").focus(function(){$(this).parent().animate({width:"400px"},500,"easeOutExpo")}).blur(function(){var c=this;setTimeout(function(){if($(c)[0]!==document.activeElement){$(c).parent().animate({width:"200px"},500,"easeOutExpo")}},500)});$("fieldset.fieldset-buttons > legend").each(function(){$(this).css({marginLeft:(Math.round($(this).parent().width()/2)-Math.round($(this).width()/2))+"px"})});$(".main-content").resize(function(){(typeof $(".isotope").isotope==="function")&&$(".isotope").isotope();$("fieldset.fieldset-buttons > legend").each(function(){$(this).css({marginLeft:(Math.round($(this).parent().width()/2)-Math.round($(this).width()/2))+"px"})})});if($.cookie){if($.cookie("menuCollapsed")==="1"){$(".main-section > nav").addClass("collapsed").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>');$(".main-content").resize()}else{if($.cookie("menuCollapsed")==="0"){$(".main-section > nav").removeClass("collapsed").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-w"></span>');$(".main-content").resize()}else{if($(".main-section > nav").hasClass("collapsed")){$(".main-section > nav").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>')}else{$(".main-section > nav").find("a.chevron").append('<span class="ui-icon ui-icon-circle-triangle-e"></span>')}}}}$(".main-section > nav a.chevron").click(function(){if($(this).parent().toggleClass("collapsed").hasClass("collapsed")){$("span",this).removeClass("ui-icon-circle-triangle-w").addClass("ui-icon-circle-triangle-e");$.cookie&&$.cookie("menuCollapsed","1",{expires:adminCookieExpiry,path:"/"})}else{$("span",this).removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-w");$.cookie&&$.cookie("menuCollapsed","0",{expires:adminCookieExpiry,path:"/"})}$(".main-content").resize();$.waypoints("refresh");if($("#float-buttons")){if($("#float-buttons .float-buttons").hasClass("float-buttons-sticky")){$("#float-buttons .float-buttons").hide();var c=setTimeout(function(){$("#float-buttons .float-buttons").show(0,function(){if($("#float-buttons").hasClass("padding-15")){$("#float-buttons .float-buttons").offset({left:($("#float-buttons").offset().left+15),top:($("#float-buttons .float-buttons").offset().top)})}else{$("#float-buttons .float-buttons").offset({left:($("#float-buttons").offset().left),top:($("#float-buttons .float-buttons").offset().top)})}})},800)}}return false});if($(sortableName).sortable){$(sortableName).sortable({cursor:"move",revert:500,opacity:0.7,appendTo:"body",handle:"header",items:"[draggable=true]",placeholder:"portlet-placeholder grid_2",forcePlaceholderSize:true,update:function(c,d){$.cookie&&$.cookie(sortableCookie,$(this).sortable("toArray"),{expires:adminCookieExpiry,path:"/"})}}).disableSelection()}$("textarea.tinymce-basic, textarea.tinymce-advanced").css("width","100%");$("textarea.tinymce-basic").css("height","100px");if($("textarea.tinymce-basic").length>0){$("textarea.tinymce-basic").tinymce({script_url:"/bundles/webilluminationadmin/js/tinymce/tiny_mce.js",theme:"advanced",plugins:"contextmenu,paste,fullscreen,xhtmlxtras,spellchecker",theme_advanced_buttons1:"bold,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,|,outdent,indent,|,spellchecker",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_resizing:true,theme_advanced_path:false,content_css:"/bundles/webilluminationadmin/css/content.css"})}if($("textarea.tinymce-advanced").length>0){$("textarea.tinymce-advanced").tinymce({script_url:"/bundles/webilluminationadmin/js/tinymce/tiny_mce.js",theme:"advanced",plugins:"pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist,spellchecker",theme_advanced_buttons1:"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect,|,spellchecker",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",theme_advanced_buttons4:"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_resizing:true,theme_advanced_path:false,content_css:"/bundles/webilluminationadmin/css/content.css"})}$("input.show-tinymce").change(function(){if($(this).val()==="1"){$($(this).attr("rel")).tinymce().show()}else{$($(this).attr("rel")).tinymce().hide()}});$.cookie&&restoreOrder(sortableName,sortableCookie);$.cookie&&$.cookie("background")&&changeBackground($.cookie("background"));$.cookie&&$.cookie("css")&&changeUicolor($.cookie("css"))}function loadImagePopup(d,c,b,a){if(c==""){c="Detailed View"}$("#dialog-image-popup-image").attr("src",d).attr("alt",c).attr("width",b).attr("height",a);$("#dialog-image-popup").dialog({autoOpen:false,autoResize:true,width:"auto",height:"auto",modal:true,show:"fade",hide:"fade"}).parents(".ui-dialog").find(".ui-dialog-titlebar-close").after("<div/>");$("#ui-dialog-title-dialog-image-popup").html(c);$("#dialog-image-popup").dialog("open")}function restoreOrder(a,c){var h=$(a);if(!h){return}var e=$.cookie(c);if(!e){return}var d=e.split(","),j=h.sortable("toArray"),f=[];for(var b=0;b<j.length;b++){f[j[b]]=j[b]}for(var k=0,l=d.length;k<l;k++){var g=d[k];if(g in f){$(a).append($(a).children("#"+g))}}}function saveCollapsed(a){$.cookie&&$.cookie("collapsedPortlets",a,{expires:adminCookieExpiry,path:"/"})}function changeBackground(a){$("body").removeClass($.cookie("background")).addClass(a);$.cookie&&$.cookie("background",a,{expires:adminCookieExpiry,path:"/"})}function changeUicolor(a){$("link.uicolor").attr("href",a);$.cookie&&$.cookie("css",a,{expires:adminCookieExpiry,path:"/"})}$.easing.drop=function(g,f,a,e,h){return -e*(Math.sqrt(1-(f/=h)*f)-1)+a};$.tools.overlay.addEffect("drop",function(d,c){var b=this.getConf(),a=this.getOverlay();if(b.fixed){d.position="fixed"}else{d.top+=$(window).scrollTop();d.left+=$(window).scrollLeft();d.position="absolute"}a.css(d).show();a.animate({top:"+=55",opacity:1,width:"+=20"},400,"drop",c)},function(a){this.getOverlay().animate({top:"-=55",opacity:0,width:"-=20"},300,"drop",function(){$(this).hide();a.call()})});if(!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return a}}return -1}}Array.prototype.includes=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return true}}return false};Array.prototype.remove=function(b){var a=this.indexOf(b);if(a!==-1){this.splice(a,1)}};function ajaxFlashMessage(b,a){if(b=="success"){$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-success ui-corner-all"><p><span class="ui-icon ui-icon-circle-check"></span><strong>SUCCESS:</strong> '+a+"</p></div></div>")}else{if(b=="error"){$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-error ui-corner-all"><p><span class="ui-icon ui-icon-alert"></span><strong>ERROR:</strong> '+a+"</p></div></div>")}else{$("#flash_messages").html('<div class="ui-widget message closeable"><div class="ui-state-highlight ui-corner-all"><p><span class="ui-icon ui-icon-info"></span><strong>NOTICE:</strong> '+a+"</p></div></div>")}}$(".message.closeable").prepend('<span class="message-close ui-icon ui-icon-circle-close"></span>').find(".message-close").click(function(){$(this).parent().fadeOut(function(){$(this).remove()})})};