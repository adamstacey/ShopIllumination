(function(k){var i,j,h=[],g=window;k.fn.tinymce=function(q){var c=this,e,d,a,t,r,s="",f="";if(!c.length){return c}if(!q){return tinyMCE.get(c[0].id)}c.css("visibility","hidden");function b(){var n=[],m=0;if(l){l();l=null}c.each(function(x,o){var y,p=o.id,z=q.oninit;if(!p){o.id=p=tinymce.DOM.uniqueId()}y=new tinymce.Editor(p,q);n.push(y);y.onInit.add(function(){var v,u=z;c.css("visibility","");if(z){if(++m==n.length){if(tinymce.is(u,"string")){v=(u.indexOf(".")===-1)?null:tinymce.resolve(u.replace(/\.\w+$/,""));u=tinymce.resolve(u)}u.apply(v||tinymce,n)}}})});k.each(n,function(o,p){p.render()})}if(!g.tinymce&&!j&&(e=q.script_url)){j=1;a=e.substring(0,e.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(e)){f="_src"}t=e.lastIndexOf("?");if(t!=-1){s=e.substring(t+1)}g.tinyMCEPreInit=g.tinyMCEPreInit||{base:a,suffix:f,query:s};if(e.indexOf("gzip")!=-1){r=q.language||"en";e=e+(/\?/.test(e)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(q.theme)+"&plugins="+escape(q.plugins)+"&languages="+r;if(!g.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=f;function m(n){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(n))}m("langs/"+r+".js");m("themes/"+q.theme+"/editor_template"+f+".js");m("themes/"+q.theme+"/langs/"+r+".js");k.each(q.plugins.split(","),function(o,n){if(n){m("plugins/"+n+"/editor_plugin"+f+".js");m("plugins/"+n+"/langs/"+r+".js")}})},end:function(){}}}}k.ajax({type:"GET",url:e,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;j=2;if(q.script_loaded){q.script_loaded()}b();k.each(h,function(m,n){n()})}})}else{if(j===1){h.push(b)}else{b()}}return c};k.extend(k.expr[":"],{tinymce:function(a){return !!(a.id&&"tinyMCE" in window&&tinyMCE.get(a.id))}});function l(){function c(f){if(f==="remove"){this.each(function(r,q){var p=d(q);if(p){p.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(r,q){var p=tinyMCE.get(q.id.replace(/_parent$/,""));if(p){p.remove()}})}function b(p){var f=this,o;if(p!==i){c.call(f);f.each(function(r,n){var m;if(m=tinyMCE.get(n.id)){m.setContent(p)}})}else{if(f.length>0){if(o=tinyMCE.get(f[0].id)){return o.getContent()}}}}function d(f){var n=null;(f)&&(f.id)&&(g.tinymce)&&(n=tinyMCE.get(f.id));return n}function a(f){return !!((f)&&(f.length)&&(g.tinymce)&&(f.is(":tinymce")))}var e={};k.each(["text","html","val"],function(r,q){var p=e[q]=k.fn[q],f=(q==="text");k.fn[q]=function(t){var n=this;if(!a(n)){return p.apply(n,arguments)}if(t!==i){b.call(n.filter(":tinymce"),t);p.apply(n.not(":tinymce"),arguments);return n}else{var o="";var m=arguments;(f?n:n.eq(0)).each(function(s,x){var w=d(x);o+=w?(f?w.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):w.getContent({save:true})):p.apply(k(x),m)});return o}}});k.each(["append","prepend"],function(r,f){var p=e[f]=k.fn[f],q=(f==="prepend");k.fn[f]=function(n){var m=this;if(!a(m)){return p.apply(m,arguments)}if(n!==i){m.filter(":tinymce").each(function(v,u){var o=d(u);o&&o.setContent(q?n+o.getContent():o.getContent()+n)});p.apply(m.not(":tinymce"),arguments);return m}}});k.each(["remove","replaceWith","replaceAll","empty"],function(f,o){var p=e[o]=k.fn[o];k.fn[o]=function(){c.call(this,o);return p.apply(this,arguments)}});e.attr=k.fn.attr;k.fn.attr=function(t,s){var f=this,v=arguments;if((!t)||(t!=="value")||(!a(f))){if(s!==i){return e.attr.apply(f,v)}else{return e.attr.apply(f,v)}}if(s!==i){b.call(f.filter(":tinymce"),s);e.attr.apply(f.not(":tinymce"),v);return f}else{var r=f[0],u=d(r);return u?u.getContent({save:true}):e.attr.apply(k(r),v)}}}})(jQuery);