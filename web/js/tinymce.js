(function(l){var k,h,j=[],g=window;l.fn.tinymce=function(s){var a=this,t,q,f,e,b,d="",c="";if(!a.length){return a}if(!s){return tinyMCE.get(a[0].id)}a.css("visibility","hidden");function r(){var m=[],n=0;if(i){i();i=null}a.each(function(z,x){var y,p=x.id,o=s.oninit;if(!p){x.id=p=tinymce.DOM.uniqueId()}y=new tinymce.Editor(p,s);m.push(y);y.onInit.add(function(){var v,u=o;a.css("visibility","");if(o){if(++n==m.length){if(tinymce.is(u,"string")){v=(u.indexOf(".")===-1)?null:tinymce.resolve(u.replace(/\.\w+$/,""));u=tinymce.resolve(u)}u.apply(v||tinymce,m)}}})});l.each(m,function(p,o){o.render()})}if(!g.tinymce&&!h&&(t=s.script_url)){h=1;f=t.substring(0,t.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(t)){c="_src"}e=t.lastIndexOf("?");if(e!=-1){d=t.substring(e+1)}g.tinyMCEPreInit=g.tinyMCEPreInit||{base:f,suffix:c,query:d};if(t.indexOf("gzip")!=-1){b=s.language||"en";t=t+(/\?/.test(t)?"&":"?")+"js=true&core=true&suffix="+escape(c)+"&themes="+escape(s.theme)+"&plugins="+escape(s.plugins)+"&languages="+b;if(!g.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=c;function m(n){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(n))}m("langs/"+b+".js");m("themes/"+s.theme+"/editor_template"+c+".js");m("themes/"+s.theme+"/langs/"+b+".js");l.each(s.plugins.split(","),function(o,n){if(n){m("plugins/"+n+"/editor_plugin"+c+".js");m("plugins/"+n+"/langs/"+b+".js")}})},end:function(){}}}}l.ajax({type:"GET",url:t,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;h=2;if(s.script_loaded){s.script_loaded()}r();l.each(j,function(n,m){m()})}})}else{if(h===1){j.push(r)}else{r()}}return a};l.extend(l.expr[":"],{tinymce:function(a){return !!(a.id&&"tinyMCE" in window&&tinyMCE.get(a.id))}});function i(){function a(f){if(f==="remove"){this.each(function(p,r){var q=c(r);if(q){q.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(p,r){var q=tinyMCE.get(r.id.replace(/_parent$/,""));if(q){q.remove()}})}function d(o){var p=this,f;if(o!==k){a.call(p);p.each(function(n,m){var r;if(r=tinyMCE.get(m.id)){r.setContent(o)}})}else{if(p.length>0){if(f=tinyMCE.get(p[0].id)){return f.getContent()}}}}function c(n){var f=null;(n)&&(n.id)&&(g.tinymce)&&(f=tinyMCE.get(n.id));return f}function e(f){return !!((f)&&(f.length)&&(g.tinymce)&&(f.is(":tinymce")))}var b={};l.each(["text","html","val"],function(p,f){var r=b[f]=l.fn[f],q=(f==="text");l.fn[f]=function(t){var o=this;if(!e(o)){return r.apply(o,arguments)}if(t!==k){d.call(o.filter(":tinymce"),t);r.apply(o.not(":tinymce"),arguments);return o}else{var m="";var n=arguments;(q?o:o.eq(0)).each(function(w,s){var x=c(s);m+=x?(q?x.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):x.getContent({save:true})):r.apply(l(s),n)});return m}}});l.each(["append","prepend"],function(p,r){var q=b[r]=l.fn[r],f=(r==="prepend");l.fn[r]=function(m){var n=this;if(!e(n)){return q.apply(n,arguments)}if(m!==k){n.filter(":tinymce").each(function(v,u){var o=c(u);o&&o.setContent(f?m+o.getContent():o.getContent()+m)});q.apply(n.not(":tinymce"),arguments);return n}}});l.each(["remove","replaceWith","replaceAll","empty"],function(p,o){var f=b[o]=l.fn[o];l.fn[o]=function(){a.call(this,o);return f.apply(this,arguments)}});b.attr=l.fn.attr;l.fn.attr=function(v,f){var u=this,s=arguments;if((!v)||(v!=="value")||(!e(u))){if(f!==k){return b.attr.apply(u,s)}else{return b.attr.apply(u,s)}}if(f!==k){d.call(u.filter(":tinymce"),f);b.attr.apply(u.not(":tinymce"),s);return u}else{var t=u[0],r=c(t);return r?r.getContent({save:true}):b.attr.apply(l(t),s)}}}})(jQuery);