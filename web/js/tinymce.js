(function(l){var g,j,h=[],k=window;l.fn.tinymce=function(q){var a=this,t,f,s,d,r,e="",c="";if(!a.length){return a}if(!q){return tinyMCE.get(a[0].id)}a.css("visibility","hidden");function b(){var m=[],n=0;if(i){i();i=null}a.each(function(y,x){var z,o=x.id,p=q.oninit;if(!o){x.id=o=tinymce.DOM.uniqueId()}z=new tinymce.Editor(o,q);m.push(z);z.onInit.add(function(){var u,v=p;a.css("visibility","");if(p){if(++n==m.length){if(tinymce.is(v,"string")){u=(v.indexOf(".")===-1)?null:tinymce.resolve(v.replace(/\.\w+$/,""));v=tinymce.resolve(v)}v.apply(u||tinymce,m)}}})});l.each(m,function(o,p){p.render()})}if(!k.tinymce&&!j&&(t=q.script_url)){j=1;s=t.substring(0,t.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(t)){c="_src"}d=t.lastIndexOf("?");if(d!=-1){e=t.substring(d+1)}k.tinyMCEPreInit=k.tinyMCEPreInit||{base:s,suffix:c,query:e};if(t.indexOf("gzip")!=-1){r=q.language||"en";t=t+(/\?/.test(t)?"&":"?")+"js=true&core=true&suffix="+escape(c)+"&themes="+escape(q.theme)+"&plugins="+escape(q.plugins)+"&languages="+r;if(!k.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=c;function m(n){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(n))}m("langs/"+r+".js");m("themes/"+q.theme+"/editor_template"+c+".js");m("themes/"+q.theme+"/langs/"+r+".js");l.each(q.plugins.split(","),function(n,o){if(o){m("plugins/"+o+"/editor_plugin"+c+".js");m("plugins/"+o+"/langs/"+r+".js")}})},end:function(){}}}}l.ajax({type:"GET",url:t,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;j=2;if(q.script_loaded){q.script_loaded()}b();l.each(h,function(n,m){m()})}})}else{if(j===1){h.push(b)}else{b()}}return a};l.extend(l.expr[":"],{tinymce:function(a){return !!(a.id&&"tinyMCE" in window&&tinyMCE.get(a.id))}});function i(){function c(f){if(f==="remove"){this.each(function(r,q){var p=d(q);if(p){p.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(r,q){var p=tinyMCE.get(q.id.replace(/_parent$/,""));if(p){p.remove()}})}function a(p){var f=this,o;if(p!==g){c.call(f);f.each(function(n,m){var r;if(r=tinyMCE.get(m.id)){r.setContent(p)}})}else{if(f.length>0){if(o=tinyMCE.get(f[0].id)){return o.getContent()}}}}function d(f){var n=null;(f)&&(f.id)&&(k.tinymce)&&(n=tinyMCE.get(f.id));return n}function e(f){return !!((f)&&(f.length)&&(k.tinymce)&&(f.is(":tinymce")))}var b={};l.each(["text","html","val"],function(r,p){var q=b[p]=l.fn[p],f=(p==="text");l.fn[p]=function(m){var t=this;if(!e(t)){return q.apply(t,arguments)}if(m!==g){a.call(t.filter(":tinymce"),m);q.apply(t.not(":tinymce"),arguments);return t}else{var n="";var o=arguments;(f?t:t.eq(0)).each(function(w,s){var x=d(s);n+=x?(f?x.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):x.getContent({save:true})):q.apply(l(s),o)});return n}}});l.each(["append","prepend"],function(r,f){var q=b[f]=l.fn[f],p=(f==="prepend");l.fn[f]=function(m){var n=this;if(!e(n)){return q.apply(n,arguments)}if(m!==g){n.filter(":tinymce").each(function(u,o){var v=d(o);v&&v.setContent(p?m+v.getContent():v.getContent()+m)});q.apply(n.not(":tinymce"),arguments);return n}}});l.each(["remove","replaceWith","replaceAll","empty"],function(f,o){var p=b[o]=l.fn[o];l.fn[o]=function(){c.call(this,o);return p.apply(this,arguments)}});b.attr=l.fn.attr;l.fn.attr=function(u,s){var f=this,v=arguments;if((!u)||(u!=="value")||(!e(f))){if(s!==g){return b.attr.apply(f,v)}else{return b.attr.apply(f,v)}}if(s!==g){a.call(f.filter(":tinymce"),s);b.attr.apply(f.not(":tinymce"),v);return f}else{var t=f[0],r=d(t);return r?r.getContent({save:true}):b.attr.apply(l(t),v)}}}})(jQuery);