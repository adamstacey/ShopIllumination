(function(i){var j,l,h=[],k=window;i.fn.tinymce=function(f){var s=this,c,q,r,t,a,d="",e="";if(!s.length){return s}if(!f){return tinyMCE.get(s[0].id)}s.css("visibility","hidden");function b(){var n=[],m=0;if(g){g();g=null}s.each(function(x,z){var o,y=z.id,p=f.oninit;if(!y){z.id=y=tinymce.DOM.uniqueId()}o=new tinymce.Editor(y,f);n.push(o);o.onInit.add(function(){var u,v=p;s.css("visibility","");if(p){if(++m==n.length){if(tinymce.is(v,"string")){u=(v.indexOf(".")===-1)?null:tinymce.resolve(v.replace(/\.\w+$/,""));v=tinymce.resolve(v)}v.apply(u||tinymce,n)}}})});i.each(n,function(p,o){o.render()})}if(!k.tinymce&&!l&&(c=f.script_url)){l=1;r=c.substring(0,c.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(c)){e="_src"}t=c.lastIndexOf("?");if(t!=-1){d=c.substring(t+1)}k.tinyMCEPreInit=k.tinyMCEPreInit||{base:r,suffix:e,query:d};if(c.indexOf("gzip")!=-1){a=f.language||"en";c=c+(/\?/.test(c)?"&":"?")+"js=true&core=true&suffix="+escape(e)+"&themes="+escape(f.theme)+"&plugins="+escape(f.plugins)+"&languages="+a;if(!k.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=e;function m(n){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(n))}m("langs/"+a+".js");m("themes/"+f.theme+"/editor_template"+e+".js");m("themes/"+f.theme+"/langs/"+a+".js");i.each(f.plugins.split(","),function(n,o){if(o){m("plugins/"+o+"/editor_plugin"+e+".js");m("plugins/"+o+"/langs/"+a+".js")}})},end:function(){}}}}i.ajax({type:"GET",url:c,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;l=2;if(f.script_loaded){f.script_loaded()}b();i.each(h,function(m,n){n()})}})}else{if(l===1){h.push(b)}else{b()}}return s};i.extend(i.expr[":"],{tinymce:function(a){return !!(a.id&&"tinyMCE" in window&&tinyMCE.get(a.id))}});function g(){function b(f){if(f==="remove"){this.each(function(r,q){var p=a(q);if(p){p.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(r,q){var p=tinyMCE.get(q.id.replace(/_parent$/,""));if(p){p.remove()}})}function d(p){var f=this,o;if(p!==j){b.call(f);f.each(function(n,m){var r;if(r=tinyMCE.get(m.id)){r.setContent(p)}})}else{if(f.length>0){if(o=tinyMCE.get(f[0].id)){return o.getContent()}}}}function a(f){var n=null;(f)&&(f.id)&&(k.tinymce)&&(n=tinyMCE.get(f.id));return n}function c(f){return !!((f)&&(f.length)&&(k.tinymce)&&(f.is(":tinymce")))}var e={};i.each(["text","html","val"],function(r,p){var q=e[p]=i.fn[p],f=(p==="text");i.fn[p]=function(n){var o=this;if(!c(o)){return q.apply(o,arguments)}if(n!==j){d.call(o.filter(":tinymce"),n);q.apply(o.not(":tinymce"),arguments);return o}else{var t="";var m=arguments;(f?o:o.eq(0)).each(function(x,w){var s=a(w);t+=s?(f?s.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):s.getContent({save:true})):q.apply(i(w),m)});return t}}});i.each(["append","prepend"],function(r,f){var q=e[f]=i.fn[f],p=(f==="prepend");i.fn[f]=function(m){var n=this;if(!c(n)){return q.apply(n,arguments)}if(m!==j){n.filter(":tinymce").each(function(o,v){var u=a(v);u&&u.setContent(p?m+u.getContent():u.getContent()+m)});q.apply(n.not(":tinymce"),arguments);return n}}});i.each(["remove","replaceWith","replaceAll","empty"],function(f,o){var p=e[o]=i.fn[o];i.fn[o]=function(){b.call(this,o);return p.apply(this,arguments)}});e.attr=i.fn.attr;i.fn.attr=function(u,r){var f=this,v=arguments;if((!u)||(u!=="value")||(!c(f))){if(r!==j){return e.attr.apply(f,v)}else{return e.attr.apply(f,v)}}if(r!==j){d.call(f.filter(":tinymce"),r);e.attr.apply(f.not(":tinymce"),v);return f}else{var s=f[0],t=a(s);return t?t.getContent({save:true}):e.attr.apply(i(s),v)}}}})(jQuery);