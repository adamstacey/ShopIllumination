(function(k){var i,h,l=[],g=window;k.fn.tinymce=function(e){var b=this,f,q,r,a,c,d="",s="";if(!b.length){return b}if(!e){return tinyMCE.get(b[0].id)}b.css("visibility","hidden");function t(){var m=[],n=0;if(j){j();j=null}b.each(function(p,o){var y,z=o.id,x=e.oninit;if(!z){o.id=z=tinymce.DOM.uniqueId()}y=new tinymce.Editor(z,e);m.push(y);y.onInit.add(function(){var v,u=x;b.css("visibility","");if(x){if(++n==m.length){if(tinymce.is(u,"string")){v=(u.indexOf(".")===-1)?null:tinymce.resolve(u.replace(/\.\w+$/,""));u=tinymce.resolve(u)}u.apply(v||tinymce,m)}}})});k.each(m,function(o,p){p.render()})}if(!g.tinymce&&!h&&(f=e.script_url)){h=1;r=f.substring(0,f.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(f)){s="_src"}a=f.lastIndexOf("?");if(a!=-1){d=f.substring(a+1)}g.tinyMCEPreInit=g.tinyMCEPreInit||{base:r,suffix:s,query:d};if(f.indexOf("gzip")!=-1){c=e.language||"en";f=f+(/\?/.test(f)?"&":"?")+"js=true&core=true&suffix="+escape(s)+"&themes="+escape(e.theme)+"&plugins="+escape(e.plugins)+"&languages="+c;if(!g.tinyMCE_GZ){tinyMCE_GZ={start:function(){tinymce.suffix=s;function m(n){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(n))}m("langs/"+c+".js");m("themes/"+e.theme+"/editor_template"+s+".js");m("themes/"+e.theme+"/langs/"+c+".js");k.each(e.plugins.split(","),function(o,n){if(n){m("plugins/"+n+"/editor_plugin"+s+".js");m("plugins/"+n+"/langs/"+c+".js")}})},end:function(){}}}}k.ajax({type:"GET",url:f,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;h=2;if(e.script_loaded){e.script_loaded()}t();k.each(l,function(n,m){m()})}})}else{if(h===1){l.push(t)}else{t()}}return b};k.extend(k.expr[":"],{tinymce:function(a){return !!(a.id&&"tinyMCE" in window&&tinyMCE.get(a.id))}});function j(){function e(f){if(f==="remove"){this.each(function(r,q){var p=c(q);if(p){p.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(r,q){var p=tinyMCE.get(q.id.replace(/_parent$/,""));if(p){p.remove()}})}function b(o){var f=this,p;if(o!==i){e.call(f);f.each(function(m,r){var n;if(n=tinyMCE.get(r.id)){n.setContent(o)}})}else{if(f.length>0){if(p=tinyMCE.get(f[0].id)){return p.getContent()}}}}function c(f){var n=null;(f)&&(f.id)&&(g.tinymce)&&(n=tinyMCE.get(f.id));return n}function a(f){return !!((f)&&(f.length)&&(g.tinymce)&&(f.is(":tinymce")))}var d={};k.each(["text","html","val"],function(q,r){var p=d[r]=k.fn[r],f=(r==="text");k.fn[r]=function(t){var m=this;if(!a(m)){return p.apply(m,arguments)}if(t!==i){b.call(m.filter(":tinymce"),t);p.apply(m.not(":tinymce"),arguments);return m}else{var n="";var o=arguments;(f?m:m.eq(0)).each(function(s,x){var w=c(x);n+=w?(f?w.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):w.getContent({save:true})):p.apply(k(x),o)});return n}}});k.each(["append","prepend"],function(q,f){var p=d[f]=k.fn[f],r=(f==="prepend");k.fn[f]=function(n){var m=this;if(!a(m)){return p.apply(m,arguments)}if(n!==i){m.filter(":tinymce").each(function(v,u){var o=c(u);o&&o.setContent(r?n+o.getContent():o.getContent()+n)});p.apply(m.not(":tinymce"),arguments);return m}}});k.each(["remove","replaceWith","replaceAll","empty"],function(f,p){var o=d[p]=k.fn[p];k.fn[p]=function(){e.call(this,p);return o.apply(this,arguments)}});d.attr=k.fn.attr;k.fn.attr=function(t,s){var r=this,u=arguments;if((!t)||(t!=="value")||(!a(r))){if(s!==i){return d.attr.apply(r,u)}else{return d.attr.apply(r,u)}}if(s!==i){b.call(r.filter(":tinymce"),s);d.attr.apply(r.not(":tinymce"),u);return r}else{var f=r[0],v=c(f);return v?v.getContent({save:true}):d.attr.apply(k(f),u)}}}})(jQuery);